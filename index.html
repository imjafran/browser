<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Detective - System & Browser Fingerprinting Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Roboto', sans-serif; 
            background: linear-gradient(135deg, #f0f4ff 0%, #e8f0fe 100%);
            min-height: 100vh;
            position: relative;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 25% 25%, rgba(59, 130, 246, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(139, 92, 246, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(236, 254, 255, 0.4) 0%, transparent 70%);
            pointer-events: none;
            z-index: -1;
        }
        .gradient-text {
            background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .card-shadow {
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .card-shadow:hover {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .info-container {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(24px) saturate(1.8);
            -webkit-backdrop-filter: blur(24px) saturate(1.8);
            border-radius: 6px;
            padding: 32px;
            margin: 20px;
            border: 0.5px solid rgba(255, 255, 255, 0.9);
            box-shadow: 
                0 8px 40px rgba(0, 0, 0, 0.08),
                0 2px 8px rgba(0, 0, 0, 0.04);
        }
        .info-section {
            /* max-height: 460px;  */
            overflow-y: auto;
            overflow-x: hidden;
        }
        .info-section::-webkit-scrollbar {
            width: 6px;
        }
        .info-section::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }
        .info-section::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        .info-section::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        .section-header {
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            user-select: none;
            border-radius: 6px;
            margin: -8px;
            padding: 8px;
        }
        .section-header:hover {
            background-color: rgba(59, 130, 246, 0.05);
        }
        .section-content {
            transition: all 0.3s ease-in-out;
            overflow: hidden;
        }
        .section-content.collapsed {
            max-height: 0;
            padding-top: 0;
            padding-bottom: 0;
            opacity: 0;
        }
        .section-content.expanded {
            max-height: 1000px;
            opacity: 1;
        }
        .chevron-icon {
            transition: transform 0.2s ease;
        }
        .chevron-icon.rotated {
            transform: rotate(180deg);
        }
        .glass-btn {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(24px) saturate(1.8);
            -webkit-backdrop-filter: blur(24px) saturate(1.8);
            border: 0.5px solid rgba(255, 255, 255, 0.9);
            border-radius: 6px;
            padding: 12px 24px;
            font-weight: 500;
            font-size: 15px;
            letter-spacing: -0.01em;
            color: #1d1d1f;
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 
                0 1px 3px rgba(0, 0, 0, 0.08),
                0 8px 30px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            position: relative;
            overflow: hidden;
        }
        
        .glass-btn:hover {
            background: rgba(255, 255, 255, 0.85);
            border-color: rgba(255, 255, 255, 0.95);
            transform: translateY(-1px);
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.1),
                0 12px 40px rgba(0, 0, 0, 0.06),
                inset 0 1px 0 rgba(255, 255, 255, 0.95);
        }
        
        .glass-btn:active {
            transform: scale(0.98);
            transition: transform 0.1s;
            background: rgba(255, 255, 255, 0.6);
        }
        
        .glass-btn.primary {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.9), rgba(99, 102, 241, 0.85));
            color: white;
            border: 0.5px solid rgba(59, 130, 246, 0.3);
            box-shadow: 
                0 1px 3px rgba(59, 130, 246, 0.2),
                0 8px 30px rgba(59, 130, 246, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        .glass-btn.primary:hover {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.95), rgba(79, 70, 229, 0.9));
            border-color: rgba(59, 130, 246, 0.5);
            box-shadow: 
                0 2px 8px rgba(59, 130, 246, 0.25),
                0 12px 40px rgba(59, 130, 246, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        .glass-btn.danger {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.9), rgba(220, 38, 38, 0.85));
            color: white;
            border: 0.5px solid rgba(239, 68, 68, 0.3);
            box-shadow: 
                0 1px 3px rgba(239, 68, 68, 0.2),
                0 8px 30px rgba(239, 68, 68, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        .glass-btn.danger:hover {
            background: linear-gradient(135deg, rgba(220, 38, 38, 0.95), rgba(185, 28, 28, 0.9));
            border-color: rgba(239, 68, 68, 0.5);
            box-shadow: 
                0 2px 8px rgba(239, 68, 68, 0.25),
                0 12px 40px rgba(239, 68, 68, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        .hero-title {
            background: linear-gradient(135deg, #1d1d1f 0%, #424245 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
            letter-spacing: -0.025em;
        }
        .hero-subtitle {
            color: #86868b;
            font-weight: 400;
            letter-spacing: -0.01em;
        }
        .dropdown {
            position: relative;
            display: inline-block;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(24px) saturate(1.8);
            -webkit-backdrop-filter: blur(24px) saturate(1.8);
            min-width: 200px;
            box-shadow: 
                0 8px 40px rgba(0, 0, 0, 0.08),
                0 2px 8px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            border: 0.5px solid rgba(255, 255, 255, 0.9);
            z-index: 1000;
            padding: 8px;
            margin-top: 8px;
        }
        .dropdown-content.show {
            display: block;
        }
        .dropdown-item {
            color: #1d1d1f;
            padding: 12px 16px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 15px;
            font-weight: 500;
            letter-spacing: -0.01em;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border-radius: 6px;
        }
        .dropdown-item:hover {
            background-color: rgba(59, 130, 246, 0.08);
            color: #1d1d1f;
        }
        .section-header {
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            user-select: none;
            border-radius: 16px;
            margin: -8px;
            padding: 8px;
        }
        .section-header:hover {
            background-color: rgba(59, 130, 246, 0.05);
        }
        .section-content {
            transition: all 0.3s ease-in-out;
            overflow: hidden;
        }
        .section-content.collapsed {
            max-height: 0;
            padding-top: 0;
            padding-bottom: 0;
            opacity: 0;
        }
        .section-content.expanded {
            max-height: 1000px;
            opacity: 1;
        }
        .chevron-icon {
            transition: transform 0.2s ease;
        }
            .masonry-container {
            column-count: 1;
            column-gap: 1.5rem;
            column-fill: balance;
        }
        @media (min-width: 768px) {
            .masonry-container {
                column-count: 2;
            }
        }
        @media (min-width: 1024px) {
            .masonry-container {
                column-count: 3;
            }
        }
        @media (min-width: 1536px) {
            .masonry-container {
                column-count: 4;
            }
        }
        .info-card {
            break-inside: avoid;
            page-break-inside: avoid;
            margin-bottom: 1.5rem;
            width: 100%;
            display: inline-block;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(24px) saturate(1.8);
            -webkit-backdrop-filter: blur(24px) saturate(1.8);
            border: 0.5px solid rgba(255, 255, 255, 0.9);
            border-radius: 6px;
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.06),
                0 1px 4px rgba(0, 0, 0, 0.04);
        }
      </style>
</head>
<body>
    <div class="max-w-7xl mx-auto sm:px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-12">
            <div class="flex items-center justify-center mb-6 gap-3 sm:px-4">
                <div class="w-16 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded flex items-center justify-center mr-4 shadow-lg">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                    </svg>
                </div>
                <div>
                    <h1 class="text-3xl sm:text-5xl font-bold hero-title mb-2">Browser Detective</h1>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex flex-wrap justify-center gap-4">
                <!-- Reset button for shared data - only visible when viewing shared data -->
                <button id="reset-to-my-data-btn" onclick="resetToMyData()" 
                        class="glass-btn danger" style="display: none;">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                    View My Browser
                </button>
                
                <button onclick="shareInfo()" class="glass-btn">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                    </svg>
                    Share Link
                </button>
                
                <button onclick="copyImageToClipboard()" class="glass-btn">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                    </svg>
                    Copy Image
                </button>
                

                
                <!-- Export Dropdown -->
                <div class="dropdown">
                    <button onclick="toggleDropdown()" class="glass-btn primary">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        Export
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div id="export-dropdown" class="dropdown-content">
                        <a onclick="handleDownloadImage()" class="dropdown-item">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            Download Image
                        </a>
                        <a onclick="exportAsCSV()" class="dropdown-item">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                            Export as CSV
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Info Container for Image Download -->
        <div id="info-container" class="info-container relative">
            <!-- Toggle All Sections Button -->
            <button id="toggle-sections-btn" onclick="toggleAllSections()" 
                    class="absolute top-4 right-4 z-10 w-10 h-10 bg-white/70 backdrop-blur-xl border border-white/30 rounded-lg flex items-center justify-center text-gray-600 hover:text-gray-800 hover:bg-white/80 transition-all duration-200 shadow-lg">
                <svg id="toggle-sections-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Browser Information Report</h2>
                <p class="text-gray-600" id="timestamp-display"></p>
            </div>

            <!-- Masonry Layout -->
            <div class="masonry-container">
                <!-- Browser Details -->
                <div class="info-card transition-all duration-300">
                    <div class="section-header flex items-center justify-between p-6 pb-4" onclick="toggleSection('browser-details')">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-sm flex items-center justify-center text-blue-600 text-xl font-bold mr-3">
                                🌐
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800">Browser Details</h3>
                        </div>
                        <svg class="chevron-icon w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    <div id="browser-details" class="section-content expanded px-6 pb-6">
                        <div id="browser-info" class="space-y-3 info-section">
                            <!-- Browser info will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- System Information -->
                <div class="info-card transition-all duration-300">
                    <div class="section-header flex items-center justify-between p-6 pb-4" onclick="toggleSection('system-details')">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-gray-100 rounded-sm flex items-center justify-center text-gray-600 text-xl font-bold mr-3">
                                💻
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800">System Information</h3>
                        </div>
                        <svg class="chevron-icon w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    <div id="system-details" class="section-content expanded px-6 pb-6">
                        <div id="system-info" class="space-y-3 info-section">
                            <!-- System info will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Display & Device -->
                <div class="info-card transition-all duration-300">
                    <div class="section-header flex items-center justify-between p-6 pb-4" onclick="toggleSection('display-details')">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-sm flex items-center justify-center text-blue-600 text-xl font-bold mr-3">
                                🖥️
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800">Display & Device</h3>
                        </div>
                        <svg class="chevron-icon w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    <div id="display-details" class="section-content expanded px-6 pb-6">
                        <div id="display-info" class="space-y-3 info-section">
                            <!-- Display info will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Location & Network -->
                <div class="info-card transition-all duration-300">
                    <div class="section-header flex items-center justify-between p-6 pb-4" onclick="toggleSection('network-details')">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-gray-100 rounded-sm flex items-center justify-center text-gray-600 text-xl font-bold mr-3">
                                🌍
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800">Location & Network</h3>
                        </div>
                        <svg class="chevron-icon w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    <div id="network-details" class="section-content expanded px-6 pb-6">
                        <div id="network-info" class="space-y-3 info-section">
                            <!-- Network info will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Technical Features -->
                <div class="info-card transition-all duration-300">
                    <div class="section-header flex items-center justify-between p-6 pb-4" onclick="toggleSection('technical-details')">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-sm flex items-center justify-center text-blue-600 text-xl font-bold mr-3">
                                ⚙️
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800">Technical Features</h3>
                        </div>
                        <svg class="chevron-icon w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    <div id="technical-details" class="section-content expanded px-6 pb-6">
                        <div id="technical-info" class="space-y-3 info-section">
                            <!-- Technical info will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Security & Privacy -->
                <div class="info-card transition-all duration-300">
                    <div class="section-header flex items-center justify-between p-6 pb-4" onclick="toggleSection('security-details')">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-gray-100 rounded-sm flex items-center justify-center text-gray-600 text-xl font-bold mr-3">
                                🔒
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800">Security & Privacy</h3>
                        </div>
                        <svg class="chevron-icon w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    <div id="security-details" class="section-content collapsed px-6 pb-6">
                        <div id="security-info" class="space-y-3 info-section">
                            <!-- Security info will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Performance & Memory -->
                <div class="info-card transition-all duration-300">
                    <div class="section-header flex items-center justify-between p-6 pb-4" onclick="toggleSection('performance-details')">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-sm flex items-center justify-center text-blue-600 text-xl font-bold mr-3">
                                📊
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800">Performance & Memory</h3>
                        </div>
                        <svg class="chevron-icon w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    <div id="performance-details" class="section-content collapsed px-6 pb-6">
                        <div id="performance-info" class="space-y-3 info-section">
                            <!-- Performance info will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Media & Audio -->
                <div class="info-card transition-all duration-300">
                    <div class="section-header flex items-center justify-between p-6 pb-4" onclick="toggleSection('media-details')">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-gray-100 rounded-sm flex items-center justify-center text-gray-600 text-xl font-bold mr-3">
                                🎵
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800">Media & Audio</h3>
                        </div>
                        <svg class="chevron-icon w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    <div id="media-details" class="section-content collapsed px-6 pb-6">
                        <div id="media-info" class="space-y-3 info-section">
                            <!-- Media info will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Session Information -->
                <div class="info-card transition-all duration-300">
                    <div class="section-header flex items-center justify-between p-6 pb-4" onclick="toggleSection('session-details')">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-sm flex items-center justify-center text-blue-600 text-xl font-bold mr-3">
                                📋
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800">Session Information</h3>
                        </div>
                        <svg class="chevron-icon w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    <div id="session-details" class="section-content collapsed px-6 pb-6">
                        <div id="session-info" class="space-y-3 info-section">
                            <!-- Session info will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-12 text-gray-500">
            <div class="max-w-3xl mx-auto space-y-3">
                <p class="text-sm">🔒 <strong>Privacy First:</strong> All data is generated locally in your browser. No information is stored anywhere on servers. Data sharing works through URL encoding - your information travels directly via the share link.</p>
                <p class="text-sm">
                    Have feedback or suggestions? 
                    <a href="https://forms.gle/u4QjCHiyN8gJzPBD8" target="_blank" rel="noopener noreferrer" 
                       class="text-blue-600 hover:text-blue-800 font-medium underline transition-colors">
                        Let us know here
                    </a>
                </p>
                <div class="flex items-center justify-center gap-6 pt-4 border-t border-gray-200">
                    <div class="flex items-center gap-2">
                        <span class="text-sm">Made with ❤️ by</span>
                        <a href="https://fb.com/iamjafran" target="_blank" rel="noopener noreferrer" 
                           class="text-blue-600 hover:text-blue-800 font-medium text-sm transition-colors">
                            Jafran Hasan
                        </a>
                    </div>
                    <div class="flex items-center gap-2">
                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0 9c-1.657 0-3-4.03-3-9s1.343-9 3-9m0 9c1.657 0 3 4.03 3 9s-1.343 9-3 9"/>
                        </svg>
                        <a href="https://browser.jafran.online" target="_blank" rel="noopener noreferrer" 
                           class="text-gray-600 hover:text-gray-800 font-medium text-sm transition-colors">
                            browser.jafran.online
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function createInfoRow(label, value, copyable = false) {
            const row = document.createElement('div');
            row.className = 'flex justify-between items-center py-2 px-3 bg-gray-50 rounded-sm';
            
            const labelSpan = document.createElement('span');
            labelSpan.className = 'text-sm font-medium text-gray-600';
            labelSpan.textContent = label;
            
            const valueContainer = document.createElement('div');
            valueContainer.className = 'flex items-center gap-2';
            
            const valueSpan = document.createElement('span');
            valueSpan.className = 'text-sm font-semibold text-gray-800';
            
            if (typeof value === 'boolean') {
                valueSpan.className += value ? ' text-green-600' : ' text-red-600';
                valueSpan.textContent = value ? 'Yes' : 'No';
            } else {
                valueSpan.textContent = value;
            }
            
            valueContainer.appendChild(valueSpan);
            
            if (copyable) {
                const copyBtn = document.createElement('button');
                copyBtn.className = 'text-gray-400 hover:text-gray-600 transition-colors';
                copyBtn.innerHTML = '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>';
                copyBtn.onclick = () => copyToClipboard(value);
                valueContainer.appendChild(copyBtn);
            }
            
            row.appendChild(labelSpan);
            row.appendChild(valueContainer);
            
            return row;
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast('Copied to clipboard!', 'success');
            }).catch(err => {
                console.error('Failed to copy: ', err);
                showToast('Failed to copy', 'error');
            });
        }

        // Toast container for stacking
        let toastContainer = null;
        
        function showToast(message, type = 'success') {
            // Create toast container if it doesn't exist
            if (!toastContainer) {
                toastContainer = document.createElement('div');
                toastContainer.className = 'fixed top-6 right-6 z-50 flex flex-col gap-3 pointer-events-none';
                document.body.appendChild(toastContainer);
            }
            
            const toast = document.createElement('div');
            toast.className = 'transform translate-x-full opacity-0 transition-all duration-300 ease-out pointer-events-auto';
            
            // Glass morphism container
            const container = document.createElement('div');
            container.className = `
                flex items-start gap-3 p-4 min-w-80 max-w-md
                bg-white/90 backdrop-blur-xl saturate-150
                border border-white/20 rounded-xl shadow-2xl
                ${type === 'success' 
                    ? 'border-l-4 border-l-green-500' 
                    : type === 'error' 
                    ? 'border-l-4 border-l-red-500'
                    : 'border-l-4 border-l-blue-500'
                }
            `.replace(/\s+/g, ' ').trim();
            
            // Icon based on type
            const iconDiv = document.createElement('div');
            iconDiv.className = `
                flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center
                ${type === 'success' 
                    ? 'bg-green-100 text-green-600' 
                    : type === 'error' 
                    ? 'bg-red-100 text-red-600'
                    : 'bg-blue-100 text-blue-600'
                }
            `.replace(/\s+/g, ' ').trim();
            
            const icon = document.createElement('svg');
            icon.className = 'w-4 h-4';
            icon.setAttribute('fill', 'none');
            icon.setAttribute('stroke', 'currentColor');
            icon.setAttribute('viewBox', '0 0 24 24');
            
            if (type === 'success') {
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>';
            } else if (type === 'error') {
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>';
            } else {
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>';
            }
            
            iconDiv.appendChild(icon);
            
            // Message content
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex-1 min-w-0';
            
            const messageText = document.createElement('p');
            messageText.className = 'text-sm font-medium text-gray-800 leading-relaxed';
            messageText.textContent = message;
            
            messageDiv.appendChild(messageText);
            
            // Close button
            const closeBtn = document.createElement('button');
            closeBtn.className = `
                flex-shrink-0 ml-2 p-1 rounded-md text-gray-400 hover:text-gray-600 
                hover:bg-gray-100/50 transition-colors duration-200 focus:outline-none
            `.replace(/\s+/g, ' ').trim();
            closeBtn.innerHTML = `
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            `;
            
            // Assemble the toast
            container.appendChild(iconDiv);
            container.appendChild(messageDiv);
            container.appendChild(closeBtn);
            toast.appendChild(container);
            
            // Add to toast container
            toastContainer.appendChild(toast);
            
            // Animate in
            requestAnimationFrame(() => {
                toast.classList.remove('translate-x-full', 'opacity-0');
                toast.classList.add('translate-x-0', 'opacity-100');
            });
            
            // Auto remove after 4 seconds
            const autoRemove = setTimeout(() => {
                removeToast();
            }, 4000);
            
            // Remove function
            function removeToast() {
                clearTimeout(autoRemove);
                toast.classList.add('translate-x-full', 'opacity-0');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.remove();
                        // Clean up container if no more toasts
                        if (toastContainer && toastContainer.children.length === 0) {
                            toastContainer.remove();
                            toastContainer = null;
                        }
                    }
                }, 300);
            }
            
            // Close button handler
            closeBtn.addEventListener('click', removeToast);
            
            // Optional: Click anywhere on toast to dismiss
            container.addEventListener('click', removeToast);
        }

        function getBrowserInfo() {
            const ua = navigator.userAgent;
            let browserName = 'Unknown';
            let browserVersion = 'Unknown';
            let engineName = 'Unknown';
            let engineVersion = 'Unknown';
            let browserDetails = {};

            // Browser detection with more details
            if (ua.includes('Chrome') && !ua.includes('Edg')) {
                browserName = 'Chrome';
                browserVersion = ua.match(/Chrome\/([0-9.]+)/)?.[1] || 'Unknown';
                engineName = 'Blink';
                engineVersion = ua.match(/Chrome\/([0-9.]+)/)?.[1] || 'Unknown';
                
                // Detect Chrome variants
                if (ua.includes('Chromium')) browserDetails.variant = 'Chromium';
                else if (ua.includes('Chrome')) browserDetails.variant = 'Google Chrome';
                
            } else if (ua.includes('Firefox')) {
                browserName = 'Firefox';
                browserVersion = ua.match(/Firefox\/([0-9.]+)/)?.[1] || 'Unknown';
                engineName = 'Gecko';
                engineVersion = ua.match(/Gecko\/([0-9]+)/)?.[1] || 'Unknown';
                
                // Detect Firefox variants
                if (ua.includes('ESR')) browserDetails.variant = 'Firefox ESR';
                else browserDetails.variant = 'Firefox';
                
            } else if (ua.includes('Safari') && !ua.includes('Chrome')) {
                browserName = 'Safari';
                browserVersion = ua.match(/Version\/([0-9.]+)/)?.[1] || 'Unknown';
                engineName = 'WebKit';
                engineVersion = ua.match(/Safari\/([0-9.]+)/)?.[1] || 'Unknown';
                browserDetails.variant = 'Safari';
                
            } else if (ua.includes('Edg')) {
                browserName = 'Edge';
                browserVersion = ua.match(/Edg\/([0-9.]+)/)?.[1] || 'Unknown';
                engineName = 'Blink';
                engineVersion = ua.match(/Edg\/([0-9.]+)/)?.[1] || 'Unknown';
                browserDetails.variant = 'Microsoft Edge';
                
            } else if (ua.includes('Opera') || ua.includes('OPR')) {
                browserName = 'Opera';
                browserVersion = ua.match(/(?:Opera|OPR)\/([0-9.]+)/)?.[1] || 'Unknown';
                engineName = 'Blink';
                browserDetails.variant = 'Opera';
            }

            // Additional browser capabilities and information
            const additionalInfo = {
                // Browser capabilities
                javaEnabled: navigator.javaEnabled ? navigator.javaEnabled() : false,
                cookiesEnabled: navigator.cookieEnabled,
                onlineStatus: navigator.onLine,
                
                // Browser window info
                historyLength: history.length,
                referrer: document.referrer || 'Direct',
                
                // Advanced features
                webAssembly: 'WebAssembly' in window,
                sharedArrayBuffer: 'SharedArrayBuffer' in window,
                webWorkers: 'Worker' in window,
                serviceWorker: 'serviceWorker' in navigator,
                webGL: 'WebGLRenderingContext' in window,
                webGL2: 'WebGL2RenderingContext' in window,
                webRTC: !!(window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection),
                
                // Storage and security
                localStorage: 'localStorage' in window,
                sessionStorage: 'sessionStorage' in window,
                indexedDB: 'indexedDB' in window,
                webCrypto: 'crypto' in window && 'subtle' in window.crypto,
                
                // Media capabilities
                webAudio: 'AudioContext' in window || 'webkitAudioContext' in window,
                mediaDevices: 'mediaDevices' in navigator,
                getUserMedia: 'getUserMedia' in navigator || 'webkitGetUserMedia' in navigator || 'mozGetUserMedia' in navigator,
                
                // Modern web features
                fetch: 'fetch' in window,
                promises: 'Promise' in window,
                modules: 'noModule' in document.createElement('script'),
                intersectionObserver: 'IntersectionObserver' in window,
                mutationObserver: 'MutationObserver' in window,
                
                // Browser behavior
                doNotTrack: navigator.doNotTrack || 'Not set',
                sendBeacon: 'sendBeacon' in navigator,
                
                // PDF and file handling
                pdfViewer: navigator.pdfViewerEnabled || false,
                mimeTypes: navigator.mimeTypes ? navigator.mimeTypes.length : 0,
                plugins: navigator.plugins ? navigator.plugins.length : 0,
                
                // Connection and performance
                connection: navigator.connection || navigator.mozConnection || navigator.webkitConnection,
                hardwareConcurrency: navigator.hardwareConcurrency || 'Unknown',
                deviceMemory: navigator.deviceMemory || 'Unknown',
                
                // Browser security
                webDriver: navigator.webdriver || false,
                permissions: 'permissions' in navigator,
                credentials: 'credentials' in navigator,
                
                // Browser identification
                buildID: navigator.buildID || 'Unknown',
                oscpu: navigator.oscpu || 'Unknown',
                productSub: navigator.productSub || 'Unknown',
                vendorSub: navigator.vendorSub || 'Unknown'
            };

            return { 
                browserName, 
                browserVersion, 
                engineName, 
                engineVersion, 
                variant: browserDetails.variant || browserName,
                ...additionalInfo 
            };
        }

        function getOperatingSystem() {
            const ua = navigator.userAgent;
            let os = 'Unknown';
            let osVersion = 'Unknown';
            let architecture = 'Unknown';

            if (ua.includes('Windows')) {
                os = 'Windows';
                if (ua.includes('Windows NT 10.0')) osVersion = '10/11';
                else if (ua.includes('Windows NT 6.3')) osVersion = '8.1';
                else if (ua.includes('Windows NT 6.2')) osVersion = '8';
                else if (ua.includes('Windows NT 6.1')) osVersion = '7';
                
                if (ua.includes('Win64') || ua.includes('x64')) architecture = 'x64';
                else if (ua.includes('WOW64')) architecture = 'x86 on x64';
                else architecture = 'x86';
            } else if (ua.includes('Mac OS X')) {
                os = 'macOS';
                const match = ua.match(/Mac OS X ([0-9_]+)/);
                if (match) osVersion = match[1].replace(/_/g, '.');
                if (ua.includes('Intel')) architecture = 'Intel';
                else if (ua.includes('PPC')) architecture = 'PowerPC';
            } else if (ua.includes('Linux')) {
                os = 'Linux';
                if (ua.includes('x86_64')) architecture = 'x64';
                else if (ua.includes('i686')) architecture = 'x86';
            } else if (ua.includes('Android')) {
                os = 'Android';
                const match = ua.match(/Android ([0-9.]+)/);
                if (match) osVersion = match[1];
            } else if (ua.includes('iOS')) {
                os = 'iOS';
                const match = ua.match(/OS ([0-9_]+)/);
                if (match) osVersion = match[1].replace(/_/g, '.');
            }

            return { os, osVersion, architecture };
        }

        function getMediaCapabilities() {
            const capabilities = {};
            
            // Audio support
            const audio = document.createElement('audio');
            capabilities.mp3 = audio.canPlayType('audio/mpeg') !== '';
            capabilities.wav = audio.canPlayType('audio/wav') !== '';
            capabilities.ogg = audio.canPlayType('audio/ogg') !== '';
            capabilities.m4a = audio.canPlayType('audio/m4a') !== '';
            
            // Video support
            const video = document.createElement('video');
            capabilities.mp4 = video.canPlayType('video/mp4') !== '';
            capabilities.webm = video.canPlayType('video/webm') !== '';
            capabilities.h264 = video.canPlayType('video/mp4; codecs="avc1.42E01E"') !== '';
            capabilities.av1 = video.canPlayType('video/mp4; codecs="av01.0.01M.08"') !== '';
            
            return capabilities;
        }

        function getNetworkInfo() {
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            
            return {
                effectiveType: connection?.effectiveType || 'Unknown',
                downlink: connection?.downlink || 'Unknown',
                rtt: connection?.rtt || 'Unknown',
                saveData: connection?.saveData || false,
                type: connection?.type || 'Unknown'
            };
        }

        async function getIPInfo() {
            try {
                // Multiple API endpoints for reliability
            const ipAPIs = [
                'https://api.ipify.org?format=json',
                'https://ipapi.co/json/',
                'https://api.my-ip.io/ip.json',
                'https://ipinfo.io/json',
                'https://api.ip.sb/ip'
            ];
            
            const detailAPIs = [
                (ip) => `https://ipapi.co/${ip}/json/`,
                (ip) => `https://ipinfo.io/${ip}/json`,
                (ip) => `https://api.ip.sb/geoip/${ip}`,
                () => 'https://ipapi.co/json/'
            ];

            let ipData = null;
            let detailData = null;

            // Try to get IP from multiple sources
            for (const apiUrl of ipAPIs) {
                try {
                    console.log(`Trying IP API: ${apiUrl}`);
                    const response = await fetch(apiUrl, { 
                        method: 'GET',
                        headers: {
                            'Accept': 'application/json',
                        },
                        signal: AbortSignal.timeout(5000) // 5 second timeout
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    const data = await response.json();
                    
                    // Extract IP from different response formats
                    const ip = data.ip || data.query || (typeof data === 'string' ? data : null);
                    
                    if (ip && typeof ip === 'string' && /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(ip)) {
                        ipData = { ip };
                        console.log(`Got IP: ${ip} from ${apiUrl}`);
                        break;
                    }
                } catch (error) {
                    console.warn(`Failed to fetch from ${apiUrl}:`, error.message);
                    continue;
                }
            }

            if (!ipData) {
                throw new Error('All IP services failed');
            }

            // Try to get detailed info from multiple sources
            for (const apiBuilder of detailAPIs) {
                try {
                    const apiUrl = apiBuilder(ipData.ip);
                    console.log(`Trying detail API: ${apiUrl}`);
                    
                    const response = await fetch(apiUrl, {
                        method: 'GET',
                        headers: {
                            'Accept': 'application/json',
                        },
                        signal: AbortSignal.timeout(5000)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    detailData = await response.json();
                    console.log('Got detail data:', detailData);
                    break;
                } catch (error) {
                    console.warn(`Failed to fetch details:`, error.message);
                    continue;
                }
            }

            // Return data with fallbacks
            try {
                return {
                    ip: ipData.ip,
                    city: detailData?.city || detailData?.locality || 'Unknown',
                    region: detailData?.region || detailData?.region_name || detailData?.state || 'Unknown',
                    country: detailData?.country_name || detailData?.country || 'Unknown',
                    countryCode: detailData?.country_code || detailData?.country || 'Unknown',
                    latitude: detailData?.latitude || detailData?.lat || 'Unknown',
                    longitude: detailData?.longitude || detailData?.lon || 'Unknown',
                    isp: detailData?.org || detailData?.organization || detailData?.as?.name || 'Unknown',
                    asn: detailData?.asn || detailData?.as?.asn || 'Unknown',
                    postal: detailData?.postal || detailData?.zip || 'Unknown',
                    timezone: detailData?.timezone || detailData?.time_zone?.name || 'Unknown'
                };
                         } catch (error) {
                 console.error('Error processing IP data:', error);
                 return {
                     ip: ipData?.ip || 'Unknown',
                     city: 'Unknown', region: 'Unknown', country: 'Unknown',
                     countryCode: 'Unknown', latitude: 'Unknown', longitude: 'Unknown',
                     isp: 'Unknown', asn: 'Unknown', postal: 'Unknown', timezone: 'Unknown'
                 };
             }
         } catch (error) {
             console.error('Error fetching IP info:', error);
             return {
                 ip: 'Unable to fetch',
                 city: 'Unknown', region: 'Unknown', country: 'Unknown',
                 countryCode: 'Unknown', latitude: 'Unknown', longitude: 'Unknown',
                 isp: 'Unknown', asn: 'Unknown', postal: 'Unknown', timezone: 'Unknown'
             };
         }
        }

        function getSecurityInfo() {
            return {
                https: location.protocol === 'https:',
                cookieEnabled: navigator.cookieEnabled,
                doNotTrack: navigator.doNotTrack || 'Not set',
                webrtc: !!(window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection),
                permissions: 'permissions' in navigator,
                serviceWorker: 'serviceWorker' in navigator,
                pushManager: 'PushManager' in window,
                notifications: 'Notification' in window
            };
        }

        function getPerformanceInfo() {
            const memory = performance.memory || {};
            const timing = performance.timing || {};
            
            return {
                jsHeapSizeLimit: memory.jsHeapSizeLimit ? `${Math.round(memory.jsHeapSizeLimit / 1048576)} MB` : 'Unknown',
                totalJSHeapSize: memory.totalJSHeapSize ? `${Math.round(memory.totalJSHeapSize / 1048576)} MB` : 'Unknown',
                usedJSHeapSize: memory.usedJSHeapSize ? `${Math.round(memory.usedJSHeapSize / 1048576)} MB` : 'Unknown',
                loadTime: timing.loadEventEnd && timing.navigationStart ? `${timing.loadEventEnd - timing.navigationStart} ms` : 'Unknown',
                domReady: timing.domContentLoadedEventEnd && timing.navigationStart ? `${timing.domContentLoadedEventEnd - timing.navigationStart} ms` : 'Unknown'
            };
        }

        function createLoadingRow(label) {
            const row = document.createElement('div');
            row.className = 'flex justify-between items-center py-2 px-3 bg-gray-50 rounded-sm';
            
            const labelSpan = document.createElement('span');
            labelSpan.className = 'text-sm font-medium text-gray-600';
            labelSpan.textContent = label;
            
            const loadingContainer = document.createElement('div');
            loadingContainer.className = 'flex items-center gap-2';
            
            const spinner = document.createElement('div');
            spinner.className = 'animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600';
            
            const loadingText = document.createElement('span');
            loadingText.className = 'text-sm text-gray-500';
            loadingText.textContent = 'Loading...';
            
            loadingContainer.appendChild(spinner);
            loadingContainer.appendChild(loadingText);
            
            row.appendChild(labelSpan);
            row.appendChild(loadingContainer);
            
            return row;
        }

        function createRetryRow(label, retryCallback) {
            const row = document.createElement('div');
            row.className = 'flex justify-between items-center py-2 px-3 bg-red-50 rounded-sm border border-red-200';
            
            const labelSpan = document.createElement('span');
            labelSpan.className = 'text-sm font-medium text-gray-600';
            labelSpan.textContent = label;
            
            const retryContainer = document.createElement('div');
            retryContainer.className = 'flex items-center gap-2';
            
            const errorText = document.createElement('span');
            errorText.className = 'text-sm text-red-600';
            errorText.textContent = 'Failed';
            
            const retryBtn = document.createElement('button');
            retryBtn.className = 'text-blue-600 hover:text-blue-800 text-sm font-medium';
            retryBtn.textContent = 'Retry';
            retryBtn.onclick = retryCallback;
            
            retryContainer.appendChild(errorText);
            retryContainer.appendChild(retryBtn);
            
            row.appendChild(labelSpan);
            row.appendChild(retryContainer);
            
            return row;
        }

        async function loadIPInfoWithIndicator() {
            const networkInfoEl = document.getElementById('network-info');
            
            // Add loading indicators for IP-related fields
            const ipFields = [
                'Public IP', 'ISP', 'ASN', 'City', 'Region', 
                'Country', 'Postal Code', 'Coordinates', 'IP Timezone'
            ];
            
            // Clear existing content and add loading rows
            const existingRows = networkInfoEl.querySelectorAll('.ip-info-row');
            existingRows.forEach(row => row.remove());
            
            const loadingRows = {};
            ipFields.forEach(field => {
                const loadingRow = createLoadingRow(field);
                loadingRow.classList.add('ip-info-row');
                networkInfoEl.insertBefore(loadingRow, networkInfoEl.firstChild);
                loadingRows[field] = loadingRow;
            });
            
            try {
                const ipInfo = await getIPInfo();
                
                // Remove loading message
                const loadingMessage = document.getElementById('ip-loading-message');
                if (loadingMessage) {
                    loadingMessage.remove();
                }
                
                // Replace loading indicators with actual data
                loadingRows['Public IP'].replaceWith(createInfoRow('Public IP', ipInfo.ip, true));
                loadingRows['ISP'].replaceWith(createInfoRow('ISP', ipInfo.isp));
                loadingRows['ASN'].replaceWith(createInfoRow('ASN', ipInfo.asn));
                loadingRows['City'].replaceWith(createInfoRow('City', ipInfo.city));
                loadingRows['Region'].replaceWith(createInfoRow('Region', ipInfo.region));
                loadingRows['Country'].replaceWith(createInfoRow('Country', `${ipInfo.country} (${ipInfo.countryCode})`));
                loadingRows['Postal Code'].replaceWith(createInfoRow('Postal Code', ipInfo.postal));
                loadingRows['Coordinates'].replaceWith(createInfoRow('Coordinates', 
                    ipInfo.latitude !== 'Unknown' && ipInfo.longitude !== 'Unknown' ? 
                    `${ipInfo.latitude}, ${ipInfo.longitude}` : 'Unknown', true));
                loadingRows['IP Timezone'].replaceWith(createInfoRow('IP Timezone', ipInfo.timezone));
                
                showToast('IP information loaded successfully!', 'success');
                return ipInfo;
                
            } catch (error) {
                console.error('Error loading IP info:', error);
                
                // Replace loading indicators with retry buttons
                const retryCallback = () => {
                    showToast('Retrying IP information fetch...', 'info');
                    loadIPInfoWithIndicator();
                };
                
                ipFields.forEach(field => {
                    if (loadingRows[field] && loadingRows[field].parentNode) {
                        loadingRows[field].replaceWith(createRetryRow(field, retryCallback));
                    }
                });
                
                showToast('Failed to load IP information. Click retry to try again.', 'error');
                
                // Return fallback data
                return {
                    ip: 'Unable to fetch',
                    city: 'Unknown', region: 'Unknown', country: 'Unknown',
                    countryCode: 'Unknown', latitude: 'Unknown', longitude: 'Unknown',
                    isp: 'Unknown', asn: 'Unknown', postal: 'Unknown', timezone: 'Unknown'
                };
            }
        }

        function loadImmediateInfo(browserInfo, osInfo, networkInfo, securityInfo, performanceInfo, mediaCapabilities) {
            // Update timestamp
            document.getElementById('timestamp-display').textContent = 
                `🔍 Your browser data - Generated on ${new Date().toLocaleString()}`;

            // Browser Details - Comprehensive information
            const browserInfoEl = document.getElementById('browser-info');
            browserInfoEl.innerHTML = '';
            
            // Basic browser info
            browserInfoEl.appendChild(createInfoRow('Browser', browserInfo.browserName));
            browserInfoEl.appendChild(createInfoRow('Variant', getBrowserInfo().variant));
            browserInfoEl.appendChild(createInfoRow('Version', browserInfo.browserVersion));
            browserInfoEl.appendChild(createInfoRow('Major Version', browserInfo.browserVersion.split('.')[0]));
            browserInfoEl.appendChild(createInfoRow('Engine', browserInfo.engineName));
            browserInfoEl.appendChild(createInfoRow('Engine Version', getBrowserInfo().engineVersion));
            browserInfoEl.appendChild(createInfoRow('Vendor', navigator.vendor || 'Unknown'));
            
            // Browser capabilities
            const browserDetails = getBrowserInfo();
            browserInfoEl.appendChild(createInfoRow('Java Enabled', browserDetails.javaEnabled));
            browserInfoEl.appendChild(createInfoRow('Cookies Enabled', browserDetails.cookiesEnabled));
            browserInfoEl.appendChild(createInfoRow('Online Status', browserDetails.onlineStatus));
            browserInfoEl.appendChild(createInfoRow('PDF Viewer', browserDetails.pdfViewer));
            browserInfoEl.appendChild(createInfoRow('WebDriver', browserDetails.webDriver));
            
            // Language and location
            browserInfoEl.appendChild(createInfoRow('Language', navigator.language));
            browserInfoEl.appendChild(createInfoRow('Current Time', new Date().toLocaleString()));
            browserInfoEl.appendChild(createInfoRow('Do Not Track', browserDetails.doNotTrack));
            
            // Browser identification
            browserInfoEl.appendChild(createInfoRow('Product Sub', browserDetails.productSub));
            browserInfoEl.appendChild(createInfoRow('Build ID', browserDetails.buildID));
            if (browserDetails.oscpu !== 'Unknown') {
                browserInfoEl.appendChild(createInfoRow('OS CPU', browserDetails.oscpu));
            }
            
            // Plugins and extensions
            browserInfoEl.appendChild(createInfoRow('MIME Types', browserDetails.mimeTypes));
            browserInfoEl.appendChild(createInfoRow('Plugins Count', browserDetails.plugins));
            browserInfoEl.appendChild(createInfoRow('History Length', browserDetails.historyLength));

            // System Information - Enhanced details
            const systemInfoEl = document.getElementById('system-info');
            systemInfoEl.innerHTML = '';
            systemInfoEl.appendChild(createInfoRow('Operating System', osInfo.os));
            systemInfoEl.appendChild(createInfoRow('OS Version', osInfo.osVersion));
            systemInfoEl.appendChild(createInfoRow('Architecture', osInfo.architecture));
            systemInfoEl.appendChild(createInfoRow('Platform', navigator.platform));
            
            // Hardware information
            const browserDetails2 = getBrowserInfo();
            systemInfoEl.appendChild(createInfoRow('CPU Cores', browserDetails2.hardwareConcurrency));
            systemInfoEl.appendChild(createInfoRow('Device Memory', browserDetails2.deviceMemory !== 'Unknown' ? `${browserDetails2.deviceMemory} GB` : 'Unknown'));
            systemInfoEl.appendChild(createInfoRow('Max Touch Points', navigator.maxTouchPoints || 0));
            
            // Additional system details
            if (browserDetails2.oscpu !== 'Unknown') {
                systemInfoEl.appendChild(createInfoRow('OS CPU Info', browserDetails2.oscpu));
            }
            
            // Connection information (if available)
            if (browserDetails2.connection) {
                const conn = browserDetails2.connection;
                systemInfoEl.appendChild(createInfoRow('Connection Type', conn.effectiveType || 'Unknown'));
                if (conn.downlink) {
                    systemInfoEl.appendChild(createInfoRow('Connection Speed', `${conn.downlink} Mbps`));
                }
            }
            
            // Browser session info
            systemInfoEl.appendChild(createInfoRow('Referrer', browserDetails2.referrer));
            systemInfoEl.appendChild(createInfoRow('Page History', `${browserDetails2.historyLength} entries`));

            // Display & Device
            const displayInfo = document.getElementById('display-info');
            displayInfo.innerHTML = '';
            displayInfo.appendChild(createInfoRow('Screen Resolution', `${screen.width} × ${screen.height}`));
            displayInfo.appendChild(createInfoRow('Available Screen', `${screen.availWidth} × ${screen.availHeight}`));
            displayInfo.appendChild(createInfoRow('Color Depth', `${screen.colorDepth} bits`));
            displayInfo.appendChild(createInfoRow('Pixel Ratio', window.devicePixelRatio));
            displayInfo.appendChild(createInfoRow('Touch Support', 'ontouchstart' in window));
            displayInfo.appendChild(createInfoRow('Orientation', screen.orientation?.type || 'Unknown'));
            displayInfo.appendChild(createInfoRow('Viewport', `${window.innerWidth} × ${window.innerHeight}`));

            // Network Information - Connection info only (IP info will be loaded separately)
            const networkInfoEl = document.getElementById('network-info');
            networkInfoEl.innerHTML = '';
            
            // Add placeholder message for IP info
            const ipLoadingMessage = document.createElement('div');
            ipLoadingMessage.className = 'text-center py-4 text-gray-500 border-b border-gray-200 mb-4';
            ipLoadingMessage.innerHTML = '<span class="text-sm">🌐 Loading IP and location information...</span>';
            ipLoadingMessage.id = 'ip-loading-message';
            networkInfoEl.appendChild(ipLoadingMessage);
            
            // Connection Information (immediate)
            networkInfoEl.appendChild(createInfoRow('Online Status', navigator.onLine));
            networkInfoEl.appendChild(createInfoRow('Connection Type', networkInfo.effectiveType));
            networkInfoEl.appendChild(createInfoRow('Downlink', networkInfo.downlink !== 'Unknown' ? `${networkInfo.downlink} Mbps` : 'Unknown'));
            networkInfoEl.appendChild(createInfoRow('RTT', networkInfo.rtt !== 'Unknown' ? `${networkInfo.rtt} ms` : 'Unknown'));
            networkInfoEl.appendChild(createInfoRow('Save Data', networkInfo.saveData));
            networkInfoEl.appendChild(createInfoRow('Browser Timezone', Intl.DateTimeFormat().resolvedOptions().timeZone));
            networkInfoEl.appendChild(createInfoRow('Timezone Offset', `${new Date().getTimezoneOffset()} minutes`));

            // Technical Features - Expanded capabilities
            const technicalInfo = document.getElementById('technical-info');
            technicalInfo.innerHTML = '';
            
            const browserDetails3 = getBrowserInfo();
            // Storage technologies
            technicalInfo.appendChild(createInfoRow('Local Storage', browserDetails3.localStorage));
            technicalInfo.appendChild(createInfoRow('Session Storage', browserDetails3.sessionStorage));
            technicalInfo.appendChild(createInfoRow('IndexedDB', browserDetails3.indexedDB));
            technicalInfo.appendChild(createInfoRow('Web Crypto API', browserDetails3.webCrypto));
            
            // Graphics and rendering
            technicalInfo.appendChild(createInfoRow('WebGL', browserDetails3.webGL));
            technicalInfo.appendChild(createInfoRow('WebGL2', browserDetails3.webGL2));
            
            // Web APIs and features
            technicalInfo.appendChild(createInfoRow('Web Workers', browserDetails3.webWorkers));
            technicalInfo.appendChild(createInfoRow('Service Workers', browserDetails3.serviceWorker));
            technicalInfo.appendChild(createInfoRow('WebAssembly', browserDetails3.webAssembly));
            technicalInfo.appendChild(createInfoRow('SharedArrayBuffer', browserDetails3.sharedArrayBuffer));
            technicalInfo.appendChild(createInfoRow('Fetch API', browserDetails3.fetch));
            technicalInfo.appendChild(createInfoRow('Promises', browserDetails3.promises));
            technicalInfo.appendChild(createInfoRow('ES6 Modules', browserDetails3.modules));
            
            // Observer APIs
            technicalInfo.appendChild(createInfoRow('Intersection Observer', browserDetails3.intersectionObserver));
            technicalInfo.appendChild(createInfoRow('Mutation Observer', browserDetails3.mutationObserver));
            
            // Media and communication
            technicalInfo.appendChild(createInfoRow('WebRTC', browserDetails3.webRTC));
            technicalInfo.appendChild(createInfoRow('Web Audio API', browserDetails3.webAudio));
            technicalInfo.appendChild(createInfoRow('Media Devices', browserDetails3.mediaDevices));
            technicalInfo.appendChild(createInfoRow('getUserMedia', browserDetails3.getUserMedia));
            
            // Navigation and security
            technicalInfo.appendChild(createInfoRow('Geolocation', 'geolocation' in navigator));
            technicalInfo.appendChild(createInfoRow('Permissions API', browserDetails3.permissions));
            technicalInfo.appendChild(createInfoRow('Credentials API', browserDetails3.credentials));
            technicalInfo.appendChild(createInfoRow('Send Beacon', browserDetails3.sendBeacon));

            // Security & Privacy
            const securityInfoEl = document.getElementById('security-info');
            securityInfoEl.innerHTML = '';
            securityInfoEl.appendChild(createInfoRow('HTTPS', securityInfo.https));
            securityInfoEl.appendChild(createInfoRow('Cookies Enabled', securityInfo.cookieEnabled));
            securityInfoEl.appendChild(createInfoRow('Do Not Track', securityInfo.doNotTrack));
            securityInfoEl.appendChild(createInfoRow('WebRTC', securityInfo.webrtc));
            securityInfoEl.appendChild(createInfoRow('Permissions API', securityInfo.permissions));
            securityInfoEl.appendChild(createInfoRow('Service Worker', securityInfo.serviceWorker));
            securityInfoEl.appendChild(createInfoRow('Push Manager', securityInfo.pushManager));
            securityInfoEl.appendChild(createInfoRow('Notifications', securityInfo.notifications));

            // Performance & Memory
            const performanceInfoEl = document.getElementById('performance-info');
            performanceInfoEl.innerHTML = '';
            performanceInfoEl.appendChild(createInfoRow('JS Heap Limit', performanceInfo.jsHeapSizeLimit));
            performanceInfoEl.appendChild(createInfoRow('Total JS Heap', performanceInfo.totalJSHeapSize));
            performanceInfoEl.appendChild(createInfoRow('Used JS Heap', performanceInfo.usedJSHeapSize));
            performanceInfoEl.appendChild(createInfoRow('Page Load Time', performanceInfo.loadTime));
            performanceInfoEl.appendChild(createInfoRow('DOM Ready Time', performanceInfo.domReady));
            performanceInfoEl.appendChild(createInfoRow('Navigation Type', performance.navigation?.type || 'Unknown'));

            // Media & Audio
            const mediaInfo = document.getElementById('media-info');
            mediaInfo.innerHTML = '';
            mediaInfo.appendChild(createInfoRow('MP3 Support', mediaCapabilities.mp3));
            mediaInfo.appendChild(createInfoRow('WAV Support', mediaCapabilities.wav));
            mediaInfo.appendChild(createInfoRow('OGG Support', mediaCapabilities.ogg));
            mediaInfo.appendChild(createInfoRow('MP4 Support', mediaCapabilities.mp4));
            mediaInfo.appendChild(createInfoRow('WebM Support', mediaCapabilities.webm));
            mediaInfo.appendChild(createInfoRow('H.264 Support', mediaCapabilities.h264));
            mediaInfo.appendChild(createInfoRow('AV1 Support', mediaCapabilities.av1));
            mediaInfo.appendChild(createInfoRow('Web Audio API', 'AudioContext' in window));

            // Session Information
            const sessionInfo = document.getElementById('session-info');
            sessionInfo.innerHTML = '';
            const now = new Date();
            sessionInfo.appendChild(createInfoRow('Data Collected', now.toLocaleString()));
            sessionInfo.appendChild(createInfoRow('Page URL', window.location.href, true));
            sessionInfo.appendChild(createInfoRow('Referrer', document.referrer || 'Direct'));
            sessionInfo.appendChild(createInfoRow('User Agent', navigator.userAgent, true));
            sessionInfo.appendChild(createInfoRow('Viewport Size', `${window.innerWidth} × ${window.innerHeight}`));
            sessionInfo.appendChild(createInfoRow('Document Title', document.title));
            sessionInfo.appendChild(createInfoRow('Character Set', document.characterSet));
        }

        async function populateInfo() {
            // Hide the reset button when viewing user's own data
            document.getElementById('reset-to-my-data-btn').style.display = 'none';
            
            const { browserName, browserVersion, engineName } = getBrowserInfo();
            const { os, osVersion, architecture } = getOperatingSystem();
            const networkInfo = getNetworkInfo();
            const securityInfo = getSecurityInfo();
            const performanceInfo = getPerformanceInfo();
            const mediaCapabilities = getMediaCapabilities();
            
            // Load non-async data first for immediate display
            loadImmediateInfo({ browserName, browserVersion, engineName }, { os, osVersion, architecture }, networkInfo, securityInfo, performanceInfo, mediaCapabilities);
            
            // Get IP and location info (async) with loading indicator
            const ipInfo = await loadIPInfoWithIndicator();

            // Update timestamp
            document.getElementById('timestamp-display').textContent = 
                `🔍 Your browser data - Generated on ${new Date().toLocaleString()}`;

            // Browser Details - Comprehensive information
            const browserInfo = document.getElementById('browser-info');
            browserInfo.innerHTML = '';
            
            // Basic browser info
            browserInfo.appendChild(createInfoRow('Browser', browserName));
            browserInfo.appendChild(createInfoRow('Variant', getBrowserInfo().variant));
            browserInfo.appendChild(createInfoRow('Version', browserVersion));
            browserInfo.appendChild(createInfoRow('Major Version', browserVersion.split('.')[0]));
            browserInfo.appendChild(createInfoRow('Engine', engineName));
            browserInfo.appendChild(createInfoRow('Engine Version', getBrowserInfo().engineVersion));
            browserInfo.appendChild(createInfoRow('Vendor', navigator.vendor || 'Unknown'));
            
            // Browser capabilities
            const browserDetails = getBrowserInfo();
            browserInfo.appendChild(createInfoRow('Java Enabled', browserDetails.javaEnabled));
            browserInfo.appendChild(createInfoRow('Cookies Enabled', browserDetails.cookiesEnabled));
            browserInfo.appendChild(createInfoRow('Online Status', browserDetails.onlineStatus));
            browserInfo.appendChild(createInfoRow('PDF Viewer', browserDetails.pdfViewer));
            browserInfo.appendChild(createInfoRow('WebDriver', browserDetails.webDriver));
            
            // Language and location
            browserInfo.appendChild(createInfoRow('Language', navigator.language));
            browserInfo.appendChild(createInfoRow('Current Time', new Date().toLocaleString()));
            // browserInfo.appendChild(createInfoRow('Languages', navigator.languages.slice(0, 3).join(', ')));
            browserInfo.appendChild(createInfoRow('Do Not Track', browserDetails.doNotTrack));
            
            // Browser identification
            browserInfo.appendChild(createInfoRow('Product Sub', browserDetails.productSub));
            browserInfo.appendChild(createInfoRow('Build ID', browserDetails.buildID));
            if (browserDetails.oscpu !== 'Unknown') {
                browserInfo.appendChild(createInfoRow('OS CPU', browserDetails.oscpu));
            }
            
            // Plugins and extensions
            browserInfo.appendChild(createInfoRow('MIME Types', browserDetails.mimeTypes));
            browserInfo.appendChild(createInfoRow('Plugins Count', browserDetails.plugins));
            browserInfo.appendChild(createInfoRow('History Length', browserDetails.historyLength));

            // System Information - Enhanced details
            const systemInfo = document.getElementById('system-info');
            systemInfo.innerHTML = '';
            systemInfo.appendChild(createInfoRow('Operating System', os));
            systemInfo.appendChild(createInfoRow('OS Version', osVersion));
            systemInfo.appendChild(createInfoRow('Architecture', architecture));
            systemInfo.appendChild(createInfoRow('Platform', navigator.platform));
            
            // Hardware information
            systemInfo.appendChild(createInfoRow('CPU Cores', browserDetails.hardwareConcurrency));
            systemInfo.appendChild(createInfoRow('Device Memory', browserDetails.deviceMemory !== 'Unknown' ? `${browserDetails.deviceMemory} GB` : 'Unknown'));
            systemInfo.appendChild(createInfoRow('Max Touch Points', navigator.maxTouchPoints || 0));
            
            // Additional system details
            if (browserDetails.oscpu !== 'Unknown') {
                systemInfo.appendChild(createInfoRow('OS CPU Info', browserDetails.oscpu));
            }
            
            // Connection information (if available)
            if (browserDetails.connection) {
                const conn = browserDetails.connection;
                systemInfo.appendChild(createInfoRow('Connection Type', conn.effectiveType || 'Unknown'));
                if (conn.downlink) {
                    systemInfo.appendChild(createInfoRow('Connection Speed', `${conn.downlink} Mbps`));
                }
            }
            
            // Browser session info
            systemInfo.appendChild(createInfoRow('Referrer', browserDetails.referrer));
            systemInfo.appendChild(createInfoRow('Page History', `${browserDetails.historyLength} entries`));

            // Display & Device
            const displayInfo = document.getElementById('display-info');
            displayInfo.innerHTML = '';
            displayInfo.appendChild(createInfoRow('Screen Resolution', `${screen.width} × ${screen.height}`));
            displayInfo.appendChild(createInfoRow('Available Screen', `${screen.availWidth} × ${screen.availHeight}`));
            displayInfo.appendChild(createInfoRow('Color Depth', `${screen.colorDepth} bits`));
            displayInfo.appendChild(createInfoRow('Pixel Ratio', window.devicePixelRatio));
            displayInfo.appendChild(createInfoRow('Touch Support', 'ontouchstart' in window));
            displayInfo.appendChild(createInfoRow('Orientation', screen.orientation?.type || 'Unknown'));
            displayInfo.appendChild(createInfoRow('Viewport', `${window.innerWidth} × ${window.innerHeight}`));

            // Network Information
            const networkInfoEl = document.getElementById('network-info');
            networkInfoEl.innerHTML = '';
            
            // IP and Location Information
            networkInfoEl.appendChild(createInfoRow('Public IP', ipInfo.ip, true));
            networkInfoEl.appendChild(createInfoRow('ISP', ipInfo.isp));
            networkInfoEl.appendChild(createInfoRow('ASN', ipInfo.asn));
            networkInfoEl.appendChild(createInfoRow('City', ipInfo.city));
            networkInfoEl.appendChild(createInfoRow('Region', ipInfo.region));
            networkInfoEl.appendChild(createInfoRow('Country', `${ipInfo.country} (${ipInfo.countryCode})`));
            networkInfoEl.appendChild(createInfoRow('Postal Code', ipInfo.postal));
            networkInfoEl.appendChild(createInfoRow('Coordinates', ipInfo.latitude !== 'Unknown' && ipInfo.longitude !== 'Unknown' ? `${ipInfo.latitude}, ${ipInfo.longitude}` : 'Unknown', true));
            networkInfoEl.appendChild(createInfoRow('IP Timezone', ipInfo.timezone));
            
            // Connection Information
            networkInfoEl.appendChild(createInfoRow('Online Status', navigator.onLine));
            networkInfoEl.appendChild(createInfoRow('Connection Type', networkInfo.effectiveType));
            networkInfoEl.appendChild(createInfoRow('Downlink', networkInfo.downlink !== 'Unknown' ? `${networkInfo.downlink} Mbps` : 'Unknown'));
            networkInfoEl.appendChild(createInfoRow('RTT', networkInfo.rtt !== 'Unknown' ? `${networkInfo.rtt} ms` : 'Unknown'));
            networkInfoEl.appendChild(createInfoRow('Save Data', networkInfo.saveData));
            networkInfoEl.appendChild(createInfoRow('Browser Timezone', Intl.DateTimeFormat().resolvedOptions().timeZone));
            networkInfoEl.appendChild(createInfoRow('Timezone Offset', `${new Date().getTimezoneOffset()} minutes`));

            // Technical Features - Expanded capabilities
            const technicalInfo = document.getElementById('technical-info');
            technicalInfo.innerHTML = '';
            
            // Storage technologies
            technicalInfo.appendChild(createInfoRow('Local Storage', browserDetails.localStorage));
            technicalInfo.appendChild(createInfoRow('Session Storage', browserDetails.sessionStorage));
            technicalInfo.appendChild(createInfoRow('IndexedDB', browserDetails.indexedDB));
            technicalInfo.appendChild(createInfoRow('Web Crypto API', browserDetails.webCrypto));
            
            // Graphics and rendering
            technicalInfo.appendChild(createInfoRow('WebGL', browserDetails.webGL));
            technicalInfo.appendChild(createInfoRow('WebGL2', browserDetails.webGL2));
            
            // Web APIs and features
            technicalInfo.appendChild(createInfoRow('Web Workers', browserDetails.webWorkers));
            technicalInfo.appendChild(createInfoRow('Service Workers', browserDetails.serviceWorker));
            technicalInfo.appendChild(createInfoRow('WebAssembly', browserDetails.webAssembly));
            technicalInfo.appendChild(createInfoRow('SharedArrayBuffer', browserDetails.sharedArrayBuffer));
            technicalInfo.appendChild(createInfoRow('Fetch API', browserDetails.fetch));
            technicalInfo.appendChild(createInfoRow('Promises', browserDetails.promises));
            technicalInfo.appendChild(createInfoRow('ES6 Modules', browserDetails.modules));
            
            // Observer APIs
            technicalInfo.appendChild(createInfoRow('Intersection Observer', browserDetails.intersectionObserver));
            technicalInfo.appendChild(createInfoRow('Mutation Observer', browserDetails.mutationObserver));
            
            // Media and communication
            technicalInfo.appendChild(createInfoRow('WebRTC', browserDetails.webRTC));
            technicalInfo.appendChild(createInfoRow('Web Audio API', browserDetails.webAudio));
            technicalInfo.appendChild(createInfoRow('Media Devices', browserDetails.mediaDevices));
            technicalInfo.appendChild(createInfoRow('getUserMedia', browserDetails.getUserMedia));
            
            // Navigation and security
            technicalInfo.appendChild(createInfoRow('Geolocation', 'geolocation' in navigator));
            technicalInfo.appendChild(createInfoRow('Permissions API', browserDetails.permissions));
            technicalInfo.appendChild(createInfoRow('Credentials API', browserDetails.credentials));
            technicalInfo.appendChild(createInfoRow('Send Beacon', browserDetails.sendBeacon));

            // Security & Privacy
            const securityInfoEl = document.getElementById('security-info');
            securityInfoEl.innerHTML = '';
            securityInfoEl.appendChild(createInfoRow('HTTPS', securityInfo.https));
            securityInfoEl.appendChild(createInfoRow('Cookies Enabled', securityInfo.cookieEnabled));
            securityInfoEl.appendChild(createInfoRow('Do Not Track', securityInfo.doNotTrack));
            securityInfoEl.appendChild(createInfoRow('WebRTC', securityInfo.webrtc));
            securityInfoEl.appendChild(createInfoRow('Permissions API', securityInfo.permissions));
            securityInfoEl.appendChild(createInfoRow('Service Worker', securityInfo.serviceWorker));
            securityInfoEl.appendChild(createInfoRow('Push Manager', securityInfo.pushManager));
            securityInfoEl.appendChild(createInfoRow('Notifications', securityInfo.notifications));

            // Performance & Memory
            const performanceInfoEl = document.getElementById('performance-info');
            performanceInfoEl.innerHTML = '';
            performanceInfoEl.appendChild(createInfoRow('JS Heap Limit', performanceInfo.jsHeapSizeLimit));
            performanceInfoEl.appendChild(createInfoRow('Total JS Heap', performanceInfo.totalJSHeapSize));
            performanceInfoEl.appendChild(createInfoRow('Used JS Heap', performanceInfo.usedJSHeapSize));
            performanceInfoEl.appendChild(createInfoRow('Page Load Time', performanceInfo.loadTime));
            performanceInfoEl.appendChild(createInfoRow('DOM Ready Time', performanceInfo.domReady));
            performanceInfoEl.appendChild(createInfoRow('Navigation Type', performance.navigation?.type || 'Unknown'));

            // Media & Audio
            const mediaInfo = document.getElementById('media-info');
            mediaInfo.innerHTML = '';
            mediaInfo.appendChild(createInfoRow('MP3 Support', mediaCapabilities.mp3));
            mediaInfo.appendChild(createInfoRow('WAV Support', mediaCapabilities.wav));
            mediaInfo.appendChild(createInfoRow('OGG Support', mediaCapabilities.ogg));
            mediaInfo.appendChild(createInfoRow('MP4 Support', mediaCapabilities.mp4));
            mediaInfo.appendChild(createInfoRow('WebM Support', mediaCapabilities.webm));
            mediaInfo.appendChild(createInfoRow('H.264 Support', mediaCapabilities.h264));
            mediaInfo.appendChild(createInfoRow('AV1 Support', mediaCapabilities.av1));
            mediaInfo.appendChild(createInfoRow('Web Audio API', 'AudioContext' in window));

            // Session Information
            const sessionInfo = document.getElementById('session-info');
            sessionInfo.innerHTML = '';
            const now = new Date();
            sessionInfo.appendChild(createInfoRow('Data Collected', now.toLocaleString()));
            sessionInfo.appendChild(createInfoRow('Page URL', window.location.href, true));
            sessionInfo.appendChild(createInfoRow('Referrer', document.referrer || 'Direct'));
            sessionInfo.appendChild(createInfoRow('User Agent', navigator.userAgent, true));
            sessionInfo.appendChild(createInfoRow('Viewport Size', `${window.innerWidth} × ${window.innerHeight}`));
            sessionInfo.appendChild(createInfoRow('Document Title', document.title));
            sessionInfo.appendChild(createInfoRow('Character Set', document.characterSet));
        }

        async function shareInfo() {
            showToast('Collecting comprehensive data for sharing...', 'info');
            
            try {
                // Collect all comprehensive data
                const browserInfo = getBrowserInfo();
                const osInfo = getOperatingSystem();
                const networkInfo = getNetworkInfo();
                const securityInfo = getSecurityInfo();
                const performanceInfo = getPerformanceInfo();
                const mediaCapabilities = getMediaCapabilities();
                
                // Get IP info (might take a moment)
                let ipInfo = null;
                try {
                    ipInfo = await getIPInfo();
                } catch (error) {
                    console.warn('Failed to get IP info for sharing:', error);
                    ipInfo = {
                        ip: 'Unknown', city: 'Unknown', region: 'Unknown', country: 'Unknown',
                        countryCode: 'Unknown', latitude: 'Unknown', longitude: 'Unknown',
                        isp: 'Unknown', asn: 'Unknown', postal: 'Unknown', timezone: 'Unknown'
                    };
                }

                const info = {
                    // Browser Details
                    browser: {
                        name: browserInfo.browserName,
                        version: browserInfo.browserVersion,
                        variant: browserInfo.variant,
                        majorVersion: browserInfo.browserVersion.split('.')[0],
                        engine: browserInfo.engineName,
                        engineVersion: browserInfo.engineVersion,
                        vendor: navigator.vendor || 'Unknown',
                        language: navigator.language,
                        languages: navigator.languages?.slice(0, 5) || [],
                        javaEnabled: browserInfo.javaEnabled,
                        cookiesEnabled: browserInfo.cookiesEnabled,
                        onlineStatus: browserInfo.onlineStatus,
                        doNotTrack: browserInfo.doNotTrack,
                        userAgent: navigator.userAgent
                    },
                    
                    // System Information
                    system: {
                        os: osInfo.os,
                        osVersion: osInfo.osVersion,
                        architecture: osInfo.architecture,
                        platform: navigator.platform,
                        hardwareConcurrency: browserInfo.hardwareConcurrency,
                        deviceMemory: browserInfo.deviceMemory,
                        maxTouchPoints: navigator.maxTouchPoints || 0
                    },
                    
                    // Display & Device
                    display: {
                        screenResolution: `${screen.width} × ${screen.height}`,
                        availableScreen: `${screen.availWidth} × ${screen.availHeight}`,
                        colorDepth: screen.colorDepth,
                        pixelRatio: window.devicePixelRatio,
                        touchSupport: 'ontouchstart' in window,
                        orientation: screen.orientation?.type || 'Unknown',
                        viewport: `${window.innerWidth} × ${window.innerHeight}`
                    },
                    
                    // Network & Location
                    network: {
                        ip: ipInfo.ip,
                        city: ipInfo.city,
                        region: ipInfo.region,
                        country: ipInfo.country,
                        countryCode: ipInfo.countryCode,
                        latitude: ipInfo.latitude,
                        longitude: ipInfo.longitude,
                        isp: ipInfo.isp,
                        asn: ipInfo.asn,
                        postal: ipInfo.postal,
                        ipTimezone: ipInfo.timezone,
                        connectionType: networkInfo.effectiveType,
                        downlink: networkInfo.downlink,
                        rtt: networkInfo.rtt,
                        saveData: networkInfo.saveData,
                        browserTimezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                        timezoneOffset: new Date().getTimezoneOffset()
                    },
                    
                    // Technical Features
                    technical: {
                        localStorage: browserInfo.localStorage,
                        sessionStorage: browserInfo.sessionStorage,
                        indexedDB: browserInfo.indexedDB,
                        webCrypto: browserInfo.webCrypto,
                        webGL: browserInfo.webGL,
                        webGL2: browserInfo.webGL2,
                        webWorkers: browserInfo.webWorkers,
                        serviceWorkers: browserInfo.serviceWorker,
                        webAssembly: browserInfo.webAssembly,
                        sharedArrayBuffer: browserInfo.sharedArrayBuffer,
                        fetchAPI: browserInfo.fetch,
                        promises: browserInfo.promises,
                        es6Modules: browserInfo.modules,
                        intersectionObserver: browserInfo.intersectionObserver,
                        mutationObserver: browserInfo.mutationObserver,
                        webRTC: browserInfo.webRTC,
                        webAudio: browserInfo.webAudio,
                        mediaDevices: browserInfo.mediaDevices,
                        getUserMedia: browserInfo.getUserMedia,
                        geolocation: 'geolocation' in navigator,
                        permissions: browserInfo.permissions,
                        credentials: browserInfo.credentials,
                        sendBeacon: browserInfo.sendBeacon
                    },
                    
                    // Security & Privacy
                    security: {
                        https: location.protocol === 'https:',
                        cookiesEnabled: securityInfo.cookieEnabled,
                        doNotTrack: securityInfo.doNotTrack,
                        webRTC: securityInfo.webrtc,
                        permissions: securityInfo.permissions,
                        serviceWorker: securityInfo.serviceWorker,
                        pushManager: securityInfo.pushManager,
                        notifications: securityInfo.notifications,
                        webDriver: browserInfo.webDriver
                    },
                    
                    // Performance & Memory
                    performance: {
                        jsHeapLimit: performanceInfo.jsHeapSizeLimit,
                        totalJSHeap: performanceInfo.totalJSHeapSize,
                        usedJSHeap: performanceInfo.usedJSHeapSize,
                        loadTime: performanceInfo.loadTime,
                        domReady: performanceInfo.domReady,
                        navigationType: performance.navigation?.type || 'Unknown'
                    },
                    
                    // Media & Audio
                    media: {
                        mp3: mediaCapabilities.mp3,
                        wav: mediaCapabilities.wav,
                        ogg: mediaCapabilities.ogg,
                        mp4: mediaCapabilities.mp4,
                        webm: mediaCapabilities.webm,
                        h264: mediaCapabilities.h264,
                        av1: mediaCapabilities.av1,
                        webAudio: 'AudioContext' in window
                    },
                    
                    // Session Information
                    session: {
                        timestamp: new Date().toISOString(),
                        url: window.location.href,
                        referrer: document.referrer || 'Direct',
                        title: document.title,
                        characterSet: document.characterSet,
                        historyLength: history.length
                    }
                };

                const jsonString = JSON.stringify(info);
                const encodedInfo = encodeURIComponent(jsonString);
                const shareUrl = `${window.location.origin}${window.location.pathname}?data=${encodedInfo}`;
                
                // Check URL length and warn user
                console.log('Generated share URL length:', shareUrl.length);
                console.log('JSON data size:', jsonString.length, 'characters');
                console.log('Encoded data size:', encodedInfo.length, 'characters');
                
                if (shareUrl.length > 8000) {
                    console.warn('Share URL is very long:', shareUrl.length, 'characters');
                    showToast(`Warning: Share URL is ${shareUrl.length} characters long. Some browsers may not support URLs this long.`, 'info');
                } else if (shareUrl.length > 2048) {
                    console.warn('Share URL is long:', shareUrl.length, 'characters');
                    showToast(`Share URL is ${shareUrl.length} characters long. Should work in most modern browsers.`, 'info');
                }
                
                navigator.clipboard.writeText(shareUrl).then(() => {
                    showToast('Complete browser data copied to clipboard!', 'success');
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    showToast('Failed to copy link', 'error');
                });
                
            } catch (error) {
                console.error('Error collecting data for sharing:', error);
                showToast('Failed to collect sharing data', 'error');
            }
        }

        function downloadAsImage() {
            const container = document.getElementById('info-container');
            const downloadBtn = document.querySelector('a[onclick="handleDownloadImage()"]');
            
            // Optional: Check if IP data is still loading (but don't prevent download)
            const loadingMessage = document.getElementById('ip-loading-message');
            const loadingRows = document.querySelectorAll('.ip-info-row');
            
            if (loadingMessage || loadingRows.length > 0) {
                showToast('Downloading with partial data (IP info still loading)...', 'info');
            }
            
            // Show loading state
            if (downloadBtn) {
                downloadBtn.innerHTML = '<svg class="animate-spin w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" class="opacity-25"></circle><path fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" class="opacity-75"></path></svg>Generating...';
                downloadBtn.style.pointerEvents = 'none';
                downloadBtn.style.opacity = '0.5';
            }
            
            // Store current state of sections
            const sections = document.querySelectorAll('.section-content');
            const originalStates = Array.from(sections).map(section => ({
                element: section,
                wasCollapsed: section.classList.contains('collapsed')
            }));
            
            // Temporarily expand all sections
            sections.forEach(section => {
                section.classList.remove('collapsed');
                section.classList.add('expanded');
            });
            
            // Create a temporary container with desktop layout
            const tempContainer = document.createElement('div');
            tempContainer.style.cssText = `
                background: white;
                border-radius: 12px;
                padding: 24px;
                margin: 20px;
                border: 1px solid #f1f5f9;
                max-width: 1200px;
                font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
                position: absolute;
                left: -9999px;
                top: 0;
            `;
            
            // Clone the header
            const header = container.querySelector('.text-center.mb-8');
            const headerClone = header.cloneNode(true);
            tempContainer.appendChild(headerClone);
            
            // Create a desktop-style grid layout for cards (2-3 columns)
            const cardsContainer = document.createElement('div');
            cardsContainer.style.cssText = `
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 24px;
                margin-top: 32px;
            `;
            
            // Get all info cards and clone them with all content
            const infoCards = document.querySelectorAll('.info-card');
            infoCards.forEach(card => {
                const cardClone = card.cloneNode(true);
                
                // Force expand the section content and make it visible
                const sectionContent = cardClone.querySelector('.section-content');
                if (sectionContent) {
                    sectionContent.classList.remove('collapsed');
                    sectionContent.classList.add('expanded');
                    sectionContent.style.cssText = `
                        max-height: none !important;
                        opacity: 1 !important;
                        padding: 0 24px 24px !important;
                        overflow: visible !important;
                        transition: none !important;
                    `;
                }
                
                // Ensure info section is fully visible
                const infoSection = cardClone.querySelector('.info-section');
                if (infoSection) {
                    infoSection.style.cssText = `
                        max-height: none !important;
                        overflow: visible !important;
                    `;
                }
                
                // Remove any loading indicators or retry buttons
                const loadingElements = cardClone.querySelectorAll('.animate-spin, .ip-info-row');
                loadingElements.forEach(el => el.remove());
                
                // Style the card for image
                cardClone.style.cssText = `
                    background: white;
                    border: 1px solid #e2e8f0;
                    border-radius: 12px;
                    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
                    break-inside: avoid;
                    margin-bottom: 0;
                    width: 100%;
                `;
                
                cardsContainer.appendChild(cardClone);
            });
            
            tempContainer.appendChild(cardsContainer);
            document.body.appendChild(tempContainer);
            
            // Wait for layout to settle
            setTimeout(() => {
                html2canvas(tempContainer, {
                    scale: 1.5,
                    backgroundColor: '#ffffff',
                    logging: false,
                    useCORS: true,
                    allowTaint: false,
                    width: 1200,
                    height: tempContainer.scrollHeight,
                    onclone: (clonedDoc) => {
                        // Ensure all elements are visible in the cloned document
                        const clonedContainer = clonedDoc.querySelector('div');
                        if (clonedContainer) {
                            clonedContainer.style.position = 'static';
                            clonedContainer.style.left = 'auto';
                            clonedContainer.style.top = 'auto';
                            
                            // Force all sections to be expanded in clone
                            const clonedSections = clonedDoc.querySelectorAll('.section-content');
                            clonedSections.forEach(section => {
                                section.style.maxHeight = 'none';
                                section.style.opacity = '1';
                                section.style.overflow = 'visible';
                            });
                        }
                    }
                }).then(canvas => {
                    // Restore original states
                    originalStates.forEach(state => {
                        if (state.wasCollapsed) {
                            state.element.classList.remove('expanded');
                            state.element.classList.add('collapsed');
                        }
                    });
                    
                    // Remove temporary container
                    document.body.removeChild(tempContainer);
                    
                    // Create download link
                    const link = document.createElement('a');
                    link.download = `browser-info-${new Date().toISOString().split('T')[0]}.png`;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                    
                    // Reset button
                    if (downloadBtn) {
                        downloadBtn.innerHTML = '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>Download Image';
                        downloadBtn.style.pointerEvents = 'auto';
                        downloadBtn.style.opacity = '1';
                    }
                    
                    showToast('Image downloaded successfully!', 'success');
                }).catch(err => {
                    console.error('Error generating image:', err);
                    
                    // Restore original states on error
                    originalStates.forEach(state => {
                        if (state.wasCollapsed) {
                            state.element.classList.remove('expanded');
                            state.element.classList.add('collapsed');
                        }
                    });
                    
                    // Remove temporary container on error
                    if (tempContainer.parentNode) {
                        document.body.removeChild(tempContainer);
                    }
                    
                    if (downloadBtn) {
                        downloadBtn.innerHTML = '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>Download Image';
                        downloadBtn.style.pointerEvents = 'auto';
                        downloadBtn.style.opacity = '1';
                    }
                    showToast('Failed to generate image', 'error');
                });
            }, 300);
        }

        function copyImageToClipboard() {
            const container = document.getElementById('info-container');
            const copyBtn = document.querySelector('button[onclick="copyImageToClipboard()"]');
            
            // Show loading state
            copyBtn.innerHTML = '<svg class="animate-spin w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" class="opacity-25"></circle><path fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" class="opacity-75"></path></svg>Copying...';
            copyBtn.disabled = true;
            
            // Create a temporary container with simple layout for image generation
            const tempContainer = document.createElement('div');
            tempContainer.style.cssText = `
                background: white;
                border-radius: 12px;
                padding: 24px;
                margin: 20px;
                border: 1px solid #f1f5f9;
                max-width: 800px;
                font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            `;
            
            // Clone the header
            const header = container.querySelector('.text-center.mb-8');
            const headerClone = header.cloneNode(true);
            tempContainer.appendChild(headerClone);
            
            // Create a simple grid layout for cards
            const cardsContainer = document.createElement('div');
            cardsContainer.style.cssText = `
                display: grid;
                grid-template-columns: 1fr;
                gap: 24px;
                margin-top: 32px;
            `;
            
            // Get all info cards and clone them with expanded content
            const infoCards = document.querySelectorAll('.info-card');
            infoCards.forEach(card => {
                const cardClone = card.cloneNode(true);
                
                // Force expand the section content
                const sectionContent = cardClone.querySelector('.section-content');
                if (sectionContent) {
                    sectionContent.classList.remove('collapsed');
                    sectionContent.classList.add('expanded');
                    sectionContent.style.cssText = `
                        max-height: none;
                        opacity: 1;
                        padding: 0 24px 24px;
                        overflow: visible;
                    `;
                }
                
                // Ensure info section is visible
                const infoSection = cardClone.querySelector('.info-section');
                if (infoSection) {
                    infoSection.style.cssText = `
                        max-height: none;
                        overflow: visible;
                    `;
                }
                
                // Style the card for image
                cardClone.style.cssText = `
                    background: white;
                    border: 1px solid #e2e8f0;
                    border-radius: 12px;
                    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
                    break-inside: avoid;
                    margin-bottom: 0;
                `;
                
                cardsContainer.appendChild(cardClone);
            });
            
            tempContainer.appendChild(cardsContainer);
            
            // Add to document temporarily (hidden)
            tempContainer.style.position = 'absolute';
            tempContainer.style.left = '-9999px';
            tempContainer.style.top = '0';
            document.body.appendChild(tempContainer);
            
            // Wait for content to render
            setTimeout(() => {
                html2canvas(tempContainer, {
                    scale: 2,
                    backgroundColor: '#ffffff',
                    logging: false,
                    useCORS: true,
                    allowTaint: false,
                    width: tempContainer.scrollWidth,
                    height: tempContainer.scrollHeight,
                    onclone: (clonedDoc) => {
                        // Ensure all text is visible in the cloned document
                        const clonedContainer = clonedDoc.querySelector('div');
                        if (clonedContainer) {
                            clonedContainer.style.position = 'static';
                            clonedContainer.style.left = 'auto';
                            clonedContainer.style.top = 'auto';
                        }
                    }
                }).then(canvas => {
                    // Remove temporary container
                    document.body.removeChild(tempContainer);
                    
                    canvas.toBlob(blob => {
                        if (navigator.clipboard && window.ClipboardItem) {
                            const item = new ClipboardItem({ 'image/png': blob });
                            navigator.clipboard.write([item]).then(() => {
                                showToast('Image copied to clipboard!', 'success');
                            }).catch(err => {
                                console.error('Failed to copy image to clipboard:', err);
                                showToast('Failed to copy image to clipboard', 'error');
                            });
                        } else {
                            showToast('Clipboard API not supported', 'error');
                        }
                    }, 'image/png');
                    
                    // Reset button
                    copyBtn.innerHTML = '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>Copy Image';
                    copyBtn.disabled = false;
                }).catch(err => {
                    console.error('Error generating image:', err);
                    
                    // Remove temporary container on error
                    if (tempContainer.parentNode) {
                        document.body.removeChild(tempContainer);
                    }
                    
                    copyBtn.innerHTML = '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>Copy Image';
                    copyBtn.disabled = false;
                    showToast('Failed to generate image', 'error');
                });
            }, 100);
        }

        // Reset to user's own browser data
        function resetToMyData() {
            // Remove the data parameter from URL and reload
            const url = new URL(window.location);
            url.searchParams.delete('data');
            window.history.replaceState({}, document.title, url.pathname);
            
            // Hide the reset button and load user's own data
            document.getElementById('reset-to-my-data-btn').style.display = 'none';
            populateInfo();
            showToast('Switched to your browser data!', 'success');
        }

        // Populate info from shared data
        function populateSharedInfo(data) {
            // Show the reset button when viewing shared data
            document.getElementById('reset-to-my-data-btn').style.display = 'flex';
            
            // Check if this is new comprehensive data format or old format
            const isComprehensiveData = data.browser && typeof data.browser === 'object' && data.browser.name;
            
            // Update timestamp and add indicator for shared data
            const timestamp = isComprehensiveData ? data.session?.timestamp : data.timestamp;
            document.getElementById('timestamp-display').textContent = 
                `📤 Viewing shared data from ${new Date(timestamp).toLocaleString()}`;

            // Always show comprehensive data - use available data or fallbacks
            if (isComprehensiveData) {
                // NEW: Full comprehensive data display
                
                // Browser Details
                const browserInfo = document.getElementById('browser-info');
                browserInfo.innerHTML = '';
                browserInfo.appendChild(createInfoRow('Browser', data.browser.name));
                browserInfo.appendChild(createInfoRow('Variant', data.browser.variant));
                browserInfo.appendChild(createInfoRow('Version', data.browser.version));
                browserInfo.appendChild(createInfoRow('Major Version', data.browser.majorVersion));
                browserInfo.appendChild(createInfoRow('Engine', data.browser.engine));
                browserInfo.appendChild(createInfoRow('Engine Version', data.browser.engineVersion));
                browserInfo.appendChild(createInfoRow('Vendor', data.browser.vendor));
                browserInfo.appendChild(createInfoRow('Language', data.browser.language));
                if (data.browser.languages?.length) {
                    browserInfo.appendChild(createInfoRow('Languages', data.browser.languages.join(', ')));
                }
                browserInfo.appendChild(createInfoRow('Java Enabled', data.browser.javaEnabled));
                browserInfo.appendChild(createInfoRow('Cookies Enabled', data.browser.cookiesEnabled));
                browserInfo.appendChild(createInfoRow('Online Status', data.browser.onlineStatus));
                browserInfo.appendChild(createInfoRow('Do Not Track', data.browser.doNotTrack));
                browserInfo.appendChild(createInfoRow('Data Source', 'Shared Link'));

                // System Information
                const systemInfo = document.getElementById('system-info');
                systemInfo.innerHTML = '';
                systemInfo.appendChild(createInfoRow('Operating System', data.system.os));
                systemInfo.appendChild(createInfoRow('OS Version', data.system.osVersion));
                systemInfo.appendChild(createInfoRow('Architecture', data.system.architecture));
                systemInfo.appendChild(createInfoRow('Platform', data.system.platform));
                systemInfo.appendChild(createInfoRow('CPU Cores', data.system.hardwareConcurrency));
                systemInfo.appendChild(createInfoRow('Device Memory', data.system.deviceMemory !== 'Unknown' ? `${data.system.deviceMemory} GB` : 'Unknown'));
                systemInfo.appendChild(createInfoRow('Max Touch Points', data.system.maxTouchPoints));
                systemInfo.appendChild(createInfoRow('Shared At', new Date(timestamp).toLocaleString()));

                // Display & Device
                const displayInfo = document.getElementById('display-info');
                displayInfo.innerHTML = '';
                displayInfo.appendChild(createInfoRow('Screen Resolution', data.display.screenResolution));
                displayInfo.appendChild(createInfoRow('Available Screen', data.display.availableScreen));
                displayInfo.appendChild(createInfoRow('Color Depth', `${data.display.colorDepth} bits`));
                displayInfo.appendChild(createInfoRow('Pixel Ratio', data.display.pixelRatio));
                displayInfo.appendChild(createInfoRow('Touch Support', data.display.touchSupport));
                displayInfo.appendChild(createInfoRow('Orientation', data.display.orientation));
                displayInfo.appendChild(createInfoRow('Viewport', data.display.viewport));

                // Network & Location
                const networkInfo = document.getElementById('network-info');
                networkInfo.innerHTML = '';
                networkInfo.appendChild(createInfoRow('Public IP', data.network.ip, true));
                networkInfo.appendChild(createInfoRow('ISP', data.network.isp));
                networkInfo.appendChild(createInfoRow('ASN', data.network.asn));
                networkInfo.appendChild(createInfoRow('City', data.network.city));
                networkInfo.appendChild(createInfoRow('Region', data.network.region));
                networkInfo.appendChild(createInfoRow('Country', `${data.network.country} (${data.network.countryCode})`));
                networkInfo.appendChild(createInfoRow('Postal Code', data.network.postal));
                if (data.network.latitude !== 'Unknown' && data.network.longitude !== 'Unknown') {
                    networkInfo.appendChild(createInfoRow('Coordinates', `${data.network.latitude}, ${data.network.longitude}`, true));
                }
                networkInfo.appendChild(createInfoRow('IP Timezone', data.network.ipTimezone));
                networkInfo.appendChild(createInfoRow('Connection Type', data.network.connectionType));
                networkInfo.appendChild(createInfoRow('Browser Timezone', data.network.browserTimezone));

                // Technical Features
                const technicalInfo = document.getElementById('technical-info');
                technicalInfo.innerHTML = '';
                technicalInfo.appendChild(createInfoRow('Local Storage', data.technical.localStorage));
                technicalInfo.appendChild(createInfoRow('Session Storage', data.technical.sessionStorage));
                technicalInfo.appendChild(createInfoRow('IndexedDB', data.technical.indexedDB));
                technicalInfo.appendChild(createInfoRow('Web Crypto API', data.technical.webCrypto));
                technicalInfo.appendChild(createInfoRow('WebGL', data.technical.webGL));
                technicalInfo.appendChild(createInfoRow('WebGL2', data.technical.webGL2));
                technicalInfo.appendChild(createInfoRow('Web Workers', data.technical.webWorkers));
                technicalInfo.appendChild(createInfoRow('Service Workers', data.technical.serviceWorkers));
                technicalInfo.appendChild(createInfoRow('WebAssembly', data.technical.webAssembly));
                technicalInfo.appendChild(createInfoRow('SharedArrayBuffer', data.technical.sharedArrayBuffer));
                technicalInfo.appendChild(createInfoRow('Fetch API', data.technical.fetchAPI));
                technicalInfo.appendChild(createInfoRow('WebRTC', data.technical.webRTC));
                technicalInfo.appendChild(createInfoRow('Geolocation', data.technical.geolocation));

                // Security & Privacy
                const securityInfo = document.getElementById('security-info');
                securityInfo.innerHTML = '';
                securityInfo.appendChild(createInfoRow('HTTPS', data.security.https));
                securityInfo.appendChild(createInfoRow('Cookies Enabled', data.security.cookiesEnabled));
                securityInfo.appendChild(createInfoRow('Do Not Track', data.security.doNotTrack));
                securityInfo.appendChild(createInfoRow('WebRTC', data.security.webRTC));
                securityInfo.appendChild(createInfoRow('Permissions API', data.security.permissions));
                securityInfo.appendChild(createInfoRow('Service Worker', data.security.serviceWorker));
                securityInfo.appendChild(createInfoRow('Push Manager', data.security.pushManager));
                securityInfo.appendChild(createInfoRow('Notifications', data.security.notifications));
                securityInfo.appendChild(createInfoRow('WebDriver', data.security.webDriver));

                // Performance & Memory
                const performanceInfo = document.getElementById('performance-info');
                performanceInfo.innerHTML = '';
                performanceInfo.appendChild(createInfoRow('JS Heap Limit', data.performance.jsHeapLimit));
                performanceInfo.appendChild(createInfoRow('Total JS Heap', data.performance.totalJSHeap));
                performanceInfo.appendChild(createInfoRow('Used JS Heap', data.performance.usedJSHeap));
                performanceInfo.appendChild(createInfoRow('Page Load Time', data.performance.loadTime));
                performanceInfo.appendChild(createInfoRow('DOM Ready Time', data.performance.domReady));
                performanceInfo.appendChild(createInfoRow('Navigation Type', data.performance.navigationType));

                // Media & Audio
                const mediaInfo = document.getElementById('media-info');
                mediaInfo.innerHTML = '';
                mediaInfo.appendChild(createInfoRow('MP3 Support', data.media.mp3));
                mediaInfo.appendChild(createInfoRow('WAV Support', data.media.wav));
                mediaInfo.appendChild(createInfoRow('OGG Support', data.media.ogg));
                mediaInfo.appendChild(createInfoRow('MP4 Support', data.media.mp4));
                mediaInfo.appendChild(createInfoRow('WebM Support', data.media.webm));
                mediaInfo.appendChild(createInfoRow('H.264 Support', data.media.h264));
                mediaInfo.appendChild(createInfoRow('AV1 Support', data.media.av1));
                mediaInfo.appendChild(createInfoRow('Web Audio API', data.media.webAudio));

                // Session Information
                const sessionInfo = document.getElementById('session-info');
                sessionInfo.innerHTML = '';
                sessionInfo.appendChild(createInfoRow('Data Collected', new Date(data.session.timestamp).toLocaleString()));
                sessionInfo.appendChild(createInfoRow('Original URL', data.session.url, true));
                sessionInfo.appendChild(createInfoRow('Referrer', data.session.referrer));
                sessionInfo.appendChild(createInfoRow('Page Title', data.session.title));
                sessionInfo.appendChild(createInfoRow('Character Set', data.session.characterSet));
                sessionInfo.appendChild(createInfoRow('History Length', data.session.historyLength));
                sessionInfo.appendChild(createInfoRow('User Agent', data.browser.userAgent, true));
                
            } else {
                // Legacy data format - populate all sections with available data
                
                // Browser Details
                const browserInfo = document.getElementById('browser-info');
                browserInfo.innerHTML = '';
                browserInfo.appendChild(createInfoRow('Browser', data.browser?.browserName || 'Unknown'));
                browserInfo.appendChild(createInfoRow('Version', data.browser?.browserVersion || 'Unknown'));
                browserInfo.appendChild(createInfoRow('Engine', data.browser?.engineName || 'Unknown'));
                if (data.browser?.browserVersion) {
                    browserInfo.appendChild(createInfoRow('Major Version', data.browser.browserVersion.split('.')[0]));
                }
                browserInfo.appendChild(createInfoRow('Language', data.language || 'Unknown'));
                browserInfo.appendChild(createInfoRow('Timezone', data.timezone || 'Unknown'));
                browserInfo.appendChild(createInfoRow('Java Enabled', data.browser?.javaEnabled || 'Unknown'));
                browserInfo.appendChild(createInfoRow('Cookies Enabled', data.browser?.cookiesEnabled || 'Unknown'));
                browserInfo.appendChild(createInfoRow('Do Not Track', data.browser?.doNotTrack || 'Unknown'));
                browserInfo.appendChild(createInfoRow('Data Source', 'Shared Link'));

                // System Information
                const systemInfo = document.getElementById('system-info');
                systemInfo.innerHTML = '';
                systemInfo.appendChild(createInfoRow('Operating System', data.os?.os || 'Unknown'));
                systemInfo.appendChild(createInfoRow('OS Version', data.os?.osVersion || 'Unknown'));
                systemInfo.appendChild(createInfoRow('Architecture', data.os?.architecture || 'Unknown'));
                systemInfo.appendChild(createInfoRow('Platform', 'Unknown'));
                systemInfo.appendChild(createInfoRow('CPU Cores', 'Unknown'));
                systemInfo.appendChild(createInfoRow('Device Memory', 'Unknown'));
                systemInfo.appendChild(createInfoRow('Max Touch Points', 'Unknown'));
                systemInfo.appendChild(createInfoRow('Shared At', new Date(timestamp).toLocaleString()));

                // Display & Device
                const displayInfo = document.getElementById('display-info');
                displayInfo.innerHTML = '';
                displayInfo.appendChild(createInfoRow('Screen Resolution', data.screen || 'Unknown'));
                displayInfo.appendChild(createInfoRow('Available Screen', 'Unknown'));
                displayInfo.appendChild(createInfoRow('Color Depth', 'Unknown'));
                displayInfo.appendChild(createInfoRow('Pixel Ratio', 'Unknown'));
                displayInfo.appendChild(createInfoRow('Touch Support', 'Unknown'));
                displayInfo.appendChild(createInfoRow('Orientation', 'Unknown'));
                displayInfo.appendChild(createInfoRow('Viewport', 'Unknown'));

                // Network & Location - Try to extract any available network data
                const networkInfo = document.getElementById('network-info');
                networkInfo.innerHTML = '';
                networkInfo.appendChild(createInfoRow('Public IP', 'Unknown'));
                networkInfo.appendChild(createInfoRow('ISP', 'Unknown'));
                networkInfo.appendChild(createInfoRow('ASN', 'Unknown'));
                networkInfo.appendChild(createInfoRow('City', 'Unknown'));
                networkInfo.appendChild(createInfoRow('Region', 'Unknown'));
                networkInfo.appendChild(createInfoRow('Country', 'Unknown'));
                networkInfo.appendChild(createInfoRow('Postal Code', 'Unknown'));
                networkInfo.appendChild(createInfoRow('IP Timezone', 'Unknown'));
                networkInfo.appendChild(createInfoRow('Connection Type', 'Unknown'));
                networkInfo.appendChild(createInfoRow('Browser Timezone', data.timezone || 'Unknown'));

                // Technical Features
                const technicalInfo = document.getElementById('technical-info');
                technicalInfo.innerHTML = '';
                technicalInfo.appendChild(createInfoRow('Local Storage', data.browser?.localStorage || 'Unknown'));
                technicalInfo.appendChild(createInfoRow('Session Storage', data.browser?.sessionStorage || 'Unknown'));
                technicalInfo.appendChild(createInfoRow('IndexedDB', data.browser?.indexedDB || 'Unknown'));
                technicalInfo.appendChild(createInfoRow('Web Crypto API', data.browser?.webCrypto || 'Unknown'));
                technicalInfo.appendChild(createInfoRow('WebGL', data.browser?.webGL || 'Unknown'));
                technicalInfo.appendChild(createInfoRow('WebGL2', data.browser?.webGL2 || 'Unknown'));
                technicalInfo.appendChild(createInfoRow('Web Workers', data.browser?.webWorkers || 'Unknown'));
                technicalInfo.appendChild(createInfoRow('Service Workers', data.browser?.serviceWorker || 'Unknown'));
                technicalInfo.appendChild(createInfoRow('WebAssembly', data.browser?.webAssembly || 'Unknown'));
                technicalInfo.appendChild(createInfoRow('WebRTC', data.browser?.webRTC || 'Unknown'));
                technicalInfo.appendChild(createInfoRow('Note', 'Limited data from older share format'));

                // Security & Privacy
                const securityInfo = document.getElementById('security-info');
                securityInfo.innerHTML = '';
                securityInfo.appendChild(createInfoRow('HTTPS', 'Unknown'));
                securityInfo.appendChild(createInfoRow('Cookies Enabled', data.browser?.cookiesEnabled || 'Unknown'));
                securityInfo.appendChild(createInfoRow('Do Not Track', data.browser?.doNotTrack || 'Unknown'));
                securityInfo.appendChild(createInfoRow('WebRTC', data.browser?.webRTC || 'Unknown'));
                securityInfo.appendChild(createInfoRow('Permissions API', data.browser?.permissions || 'Unknown'));
                securityInfo.appendChild(createInfoRow('Service Worker', data.browser?.serviceWorker || 'Unknown'));
                securityInfo.appendChild(createInfoRow('Push Manager', 'Unknown'));
                securityInfo.appendChild(createInfoRow('Notifications', 'Unknown'));

                // Performance & Memory
                const performanceInfo = document.getElementById('performance-info');
                performanceInfo.innerHTML = '';
                performanceInfo.appendChild(createInfoRow('JS Heap Limit', 'Unknown'));
                performanceInfo.appendChild(createInfoRow('Total JS Heap', 'Unknown'));
                performanceInfo.appendChild(createInfoRow('Used JS Heap', 'Unknown'));
                performanceInfo.appendChild(createInfoRow('Page Load Time', 'Unknown'));
                performanceInfo.appendChild(createInfoRow('DOM Ready Time', 'Unknown'));
                performanceInfo.appendChild(createInfoRow('Navigation Type', 'Unknown'));

                // Media & Audio
                const mediaInfo = document.getElementById('media-info');
                mediaInfo.innerHTML = '';
                mediaInfo.appendChild(createInfoRow('MP3 Support', 'Unknown'));
                mediaInfo.appendChild(createInfoRow('WAV Support', 'Unknown'));
                mediaInfo.appendChild(createInfoRow('OGG Support', 'Unknown'));
                mediaInfo.appendChild(createInfoRow('MP4 Support', 'Unknown'));
                mediaInfo.appendChild(createInfoRow('WebM Support', 'Unknown'));
                mediaInfo.appendChild(createInfoRow('H.264 Support', 'Unknown'));
                mediaInfo.appendChild(createInfoRow('AV1 Support', 'Unknown'));
                mediaInfo.appendChild(createInfoRow('Web Audio API', 'Unknown'));

                // Session Information
                const sessionInfo = document.getElementById('session-info');
                sessionInfo.innerHTML = '';
                sessionInfo.appendChild(createInfoRow('Data Collected', new Date(timestamp).toLocaleString()));
                sessionInfo.appendChild(createInfoRow('Original URL', 'Unknown'));
                sessionInfo.appendChild(createInfoRow('Referrer', 'Unknown'));
                sessionInfo.appendChild(createInfoRow('Page Title', 'Unknown'));
                sessionInfo.appendChild(createInfoRow('Character Set', 'Unknown'));
                sessionInfo.appendChild(createInfoRow('History Length', 'Unknown'));
                sessionInfo.appendChild(createInfoRow('User Agent', data.browser?.userAgent || 'Unknown'));
            }
        }

        // Check if there's shared data in URL
        function checkSharedData() {
            const urlParams = new URLSearchParams(window.location.search);
            const sharedData = urlParams.get('data');
            
            if (sharedData) {
                try {
                    console.log('Shared data length:', sharedData.length);
                    console.log('URL length:', window.location.href.length);
                    
                    // Check if URL is suspiciously long
                    if (window.location.href.length > 8000) {
                        console.warn('URL is very long:', window.location.href.length, 'characters');
                        showToast('Warning: Shared URL is very long and may not work in all browsers', 'info');
                    }
                    
                    const decodedData = decodeURIComponent(sharedData);
                    console.log('Decoded data length:', decodedData.length);
                    console.log('First 200 chars of decoded data:', decodedData.substring(0, 200));
                    
                    const data = JSON.parse(decodedData);
                    console.log('Parsed data successfully:', Object.keys(data));
                    
                    populateSharedInfo(data);
                    showToast('Loaded shared browser data!', 'success');
                    return true;
                } catch (e) {
                    console.error('Error parsing shared data:', e);
                    console.error('Raw shared data (first 500 chars):', sharedData.substring(0, 500));
                    
                    if (e.name === 'SyntaxError') {
                        showToast('Shared data format is invalid or corrupted', 'error');
                    } else if (e.message.includes('URI')) {
                        showToast('Shared URL contains invalid characters', 'error');
                    } else {
                        showToast('Failed to load shared data: ' + e.message, 'error');
                    }
                    return false;
                }
            }
            return false;
        }

        // Collapsible sections functionality
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            const chevron = section.parentNode.querySelector('.chevron-icon');
            
            if (section.classList.contains('collapsed')) {
                // Expand section
                section.classList.remove('collapsed');
                section.classList.add('expanded');
                chevron.classList.add('rotated');
            } else {
                // Collapse section
                section.classList.remove('expanded');
                section.classList.add('collapsed');
                chevron.classList.remove('rotated');
            }
        }

        function toggleAllSections() {
            const sections = document.querySelectorAll('.section-content');
            const chevrons = document.querySelectorAll('.chevron-icon');
            const toggleIcon = document.getElementById('toggle-sections-icon');
            
            // Check if any sections are collapsed
            const hasCollapsed = Array.from(sections).some(section => section.classList.contains('collapsed'));
            
            if (hasCollapsed) {
                // Expand all sections
                sections.forEach(section => {
                    section.classList.remove('collapsed');
                    section.classList.add('expanded');
                });
                chevrons.forEach(chevron => {
                    chevron.classList.add('rotated');
                });
                toggleIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>';
            } else {
                // Collapse all sections
                sections.forEach(section => {
                    section.classList.remove('expanded');
                    section.classList.add('collapsed');
                });
                chevrons.forEach(chevron => {
                    chevron.classList.remove('rotated');
                });
                toggleIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>';
            }
        }

        // Handle download image from dropdown
        function handleDownloadImage() {
            // Close dropdown first
            document.getElementById('export-dropdown').classList.remove('show');
            // Then call the download function
            downloadAsImage();
        }

        // Dropdown functionality
        function toggleDropdown() {
            const dropdown = document.getElementById('export-dropdown');
            dropdown.classList.toggle('show');
        }

        // Close dropdown when clicking outside
        window.onclick = function(event) {
            // Check if click is on dropdown button or inside dropdown
            if (!event.target.closest('.dropdown')) {
                const dropdowns = document.getElementsByClassName('dropdown-content');
                for (let i = 0; i < dropdowns.length; i++) {
                    const openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }

        // CSV Export functionality
        function exportAsCSV() {
            // Close dropdown
            document.getElementById('export-dropdown').classList.remove('show');
            
            const data = [];
            const sections = [
                { id: 'browser-info', title: 'Browser Details' },
                { id: 'system-info', title: 'System Information' },
                { id: 'display-info', title: 'Display & Device' },
                { id: 'network-info', title: 'Location & Network' },
                { id: 'technical-info', title: 'Technical Features' },
                { id: 'security-info', title: 'Security & Privacy' },
                { id: 'performance-info', title: 'Performance & Memory' },
                { id: 'media-info', title: 'Media & Audio' },
                { id: 'session-info', title: 'Session Information' }
            ];

            sections.forEach(section => {
                const sectionEl = document.getElementById(section.id);
                if (sectionEl) {
                    data.push(['Category', 'Property', 'Value']);
                    data.push(['', '', '']); // Empty row for separation
                    
                    const rows = sectionEl.querySelectorAll('.flex.justify-between');
                    rows.forEach(row => {
                        const label = row.querySelector('.text-sm.font-medium')?.textContent || '';
                        const value = row.querySelector('.text-sm.font-semibold')?.textContent || '';
                        if (label && value) {
                            data.push([section.title, label, value]);
                        }
                    });
                    data.push(['', '', '']); // Empty row for separation
                }
            });

            // Convert to CSV
            const csvContent = data.map(row => 
                row.map(cell => `"${cell.toString().replace(/"/g, '""')}"`).join(',')
            ).join('\n');

            // Download CSV
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `browser-info-${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            showToast('CSV exported successfully!', 'success');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Check for shared data first, if not found then load current browser data
            if (!checkSharedData()) {
                populateInfo();
            }
            
            // Initialize section states - show most important sections by default
            const importantSections = ['browser-details', 'system-details', 'display-details', 'network-details', 'technical-details'];
            importantSections.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                const chevron = section.parentNode.querySelector('.chevron-icon');
                if (section && section.classList.contains('expanded')) {
                    chevron.classList.add('rotated');
                }
            });
            
            // Initialize toggle button icon based on current state
            const hasCollapsed = Array.from(document.querySelectorAll('.section-content')).some(section => section.classList.contains('collapsed'));
            const toggleIcon = document.getElementById('toggle-sections-icon');
            if (!hasCollapsed) {
                toggleIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>';
            }
            
            // Auto-refresh every 30 seconds for dynamic data
            setInterval(() => {
                // Only refresh network and performance data
                const networkInfo = getNetworkInfo();
                const performanceInfo = getPerformanceInfo();
                
                // Update network status
                const onlineStatus = document.querySelector('#network-info .flex:first-child .text-sm:last-child');
                if (onlineStatus) {
                    onlineStatus.textContent = navigator.onLine ? 'Yes' : 'No';
                    onlineStatus.className = navigator.onLine ? 'text-sm font-semibold text-green-600' : 'text-sm font-semibold text-red-600';
                }
            }, 30000);
            
            // Update current time every second
            setInterval(() => {
                // Find and update the current time display in browser details
                const browserInfoRows = document.querySelectorAll('#browser-info .flex.justify-between');
                browserInfoRows.forEach(row => {
                    const label = row.querySelector('.text-sm.font-medium');
                    if (label && label.textContent === 'Current Time') {
                        const valueSpan = row.querySelector('.text-sm.font-semibold');
                        if (valueSpan) {
                            valueSpan.textContent = new Date().toLocaleString();
                        }
                    }
                });
            }, 1000);
        });
    </script>
</body>
</html>
